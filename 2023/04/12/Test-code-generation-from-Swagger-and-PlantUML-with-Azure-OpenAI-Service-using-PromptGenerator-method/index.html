<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="alternative" href="/atom.xml" title="kt.log" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>Test code generation from Swagger and PlantUML with Azure OpenAI Service using PromptGenerator method - kt.log</title>
<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="/js/fancybox/jquery.fancybox.min.css">
<!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]-->
<script src="/js/jquery-3.1.1.min.js"></script>

<script src="/js/fancybox/jquery.fancybox.min.js"></script>
<meta name="generator" content="Hexo 6.2.0"></head><body style="opacity:0"><header class="head"><h1 class="head-title u-fl"><a href="/">kt.log</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a class="head-nav__link" href="/archives">Articles</a></li><li class="head-nav__item"><a class="head-nav__link" href="/tags">Tags</a></li><li class="head-nav__item"><a class="head-nav__link" href="/links">Links</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"><time class="post__time" datetime="2023-04-11T18:10:56.000Z">2023-04-12 03:10:56</time><h1 class="post__title"><a href="/2023/04/12/Test-code-generation-from-Swagger-and-PlantUML-with-Azure-OpenAI-Service-using-PromptGenerator-method/">Test code generation from Swagger and PlantUML with Azure OpenAI Service using PromptGenerator method</a></h1><div class="post__main echo"><h1 id="PromptGenerator-メソッドによって最適化されたプロンプトを使って-Azure-OpenAI-Service-で-OpenAPI-と-PlantUML-からテストコードを生成する"><a href="#PromptGenerator-メソッドによって最適化されたプロンプトを使って-Azure-OpenAI-Service-で-OpenAPI-と-PlantUML-からテストコードを生成する" class="headerlink" title="PromptGenerator メソッドによって最適化されたプロンプトを使って Azure OpenAI Service で OpenAPI と PlantUML からテストコードを生成する"></a>PromptGenerator メソッドによって最適化されたプロンプトを使って Azure OpenAI Service で OpenAPI と PlantUML からテストコードを生成する</h1><p>前回、<a target="_blank" rel="noopener" href="https://learn.microsoft.com/ja-jp/azure/cognitive-services/openai/overview">Azure OpenAI Service</a> を使って OpenAPI と PlantUML からテストコードを生成する取り組みについて説明しました。<br>ここで出来ていなかったことの一つとして、プロンプトのチューニングがあります。<br>今回、ChatGPT にプロンプトを生成させる PromptGenerator というメソッドを用いて最適化されたプロンプトを生成し、そのプロンプトを用いて前回同様のアプローチでテストコードを生成して、その内容を評価したいと思います。</p>
<h2 id="ゴール"><a href="#ゴール" class="headerlink" title="ゴール"></a>ゴール</h2><ul>
<li>PromptGenerator メソッドを用いて、前回のプロンプトに代わる最適化されたプロンプトを生成する。</li>
<li>前項のプロンプトを使ってドキュメントからテストコードを生成し、その内容を評価する。</li>
</ul>
<h2 id="免責"><a href="#免責" class="headerlink" title="免責"></a>免責</h2><ul>
<li>本記事の内容は、執筆時点のものです。LLM の変化やゆらぎもあるため、再現性は保証されません。</li>
<li>本記事の内容は検証レベルのものです。完全な手法に関する情報を提供するものではありません。</li>
<li>本記事で使用する PlantUML は、細部まで作り込んでいるわけではありません。細かい部分で間違いがある可能性があります。</li>
</ul>
<h2 id="PromptGenerator-について"><a href="#PromptGenerator-について" class="headerlink" title="PromptGenerator について"></a>PromptGenerator について</h2><ul>
<li>オリジナルは <a target="_blank" rel="noopener" href="https://www.skool.com/@bret-littlefield-2862?g=chatgpt">Bret Littlefield</a> 氏による<a target="_blank" rel="noopener" href="https://www.skool.com/chatgpt/promptgenerator?p=1e5ede93">こちら</a>の投稿です。</li>
<li>日本語による解説等については、以下の記事を参照してください。<ul>
<li><a target="_blank" rel="noopener" href="https://note.com/daichi_mu/n/n211369defcef">【プロンプト勉強】サイコーのプロンプトを導くための方法</a></li>
<li><a target="_blank" rel="noopener" href="https://note.com/kamiumi_lab/n/n52aa27224861">ChatGPTのプロンプト作りの悩みを解消する最強メソッド！</a></li>
</ul>
</li>
</ul>
<h2 id="プロンプトによるプロンプトの生成"><a href="#プロンプトによるプロンプトの生成" class="headerlink" title="プロンプトによるプロンプトの生成"></a>プロンプトによるプロンプトの生成</h2><p>ChatGPT (GPT-4) で以下のやりとりを行い、プロンプトを生成しました。<br>プロンプトの生成回数は 15 回で、その中には前回挙げた改善点に関する内容も含まれています。</p>
<h3 id="初回プロンプト"><a href="#初回プロンプト" class="headerlink" title="初回プロンプト"></a>初回プロンプト</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">I want you to be my prompt engineer. Your goal is to help me craft the best prompt for my needs. That prompt will be used by you in ChatGPT.</span><br><span class="line"></span><br><span class="line">Follow the process below.</span><br><span class="line"></span><br><span class="line">1. Your first response is to ask me what the prompt should be about.</span><br><span class="line">I&#x27;ll provide my answer, but it should go through the next steps and improve through continuous iterations.</span><br><span class="line"></span><br><span class="line">2. Generate two sections based on my input.</span><br><span class="line">a) Revised Prompt (Provide a rewritten prompt. It should be clear, concise, and easy for you to understand.)</span><br><span class="line">b) suggestions (suggesting details to include in the prompt to improve it);</span><br><span class="line">c) Questions (ask any relevant questions about any additional information you need from me to improve the prompt)</span><br><span class="line"></span><br><span class="line">3. This iterative process continues until I provide you with additional information, you update the prompts in the Revised Prompts section, and I am done.</span><br></pre></td></tr></table></figure>

<blockquote>
<p>What should the prompt be about?</p>
</blockquote>
<h4 id="回答"><a href="#回答" class="headerlink" title="回答"></a>回答</h4><p>It’s about test code generation in Python from materials such as OpenAI Specifications, PlantUML sequence diagrams, PlantUML class diagrams, and so on.</p>
<h3 id="生成されたプロンプト-1"><a href="#生成されたプロンプト-1" class="headerlink" title="生成されたプロンプト #1"></a>生成されたプロンプト #1</h3><blockquote>
<p>a) Revised Prompt:<br>How can one generate test code in Python using materials like OpenAI Specifications, PlantUML sequence diagrams, and PlantUML class diagrams?</p>
<p>b) Suggestions:</p>
<ul>
<li>Briefly explain the purpose of using these materials for test code generation.</li>
<li>Describe the process of converting diagrams and specifications into Python test code.</li>
<li>Mention any libraries or tools that can be used to facilitate this process.</li>
</ul>
<p>c) Questions:</p>
<ol>
<li>Are there any specific tools or libraries you would like to know more about for this purpose?</li>
<li>What is your level of expertise in Python and these materials?</li>
<li>Do you have any specific use case or project in mind for this prompt?</li>
</ol>
</blockquote>
<h4 id="回答-1"><a href="#回答-1" class="headerlink" title="回答"></a>回答</h4><p>As my answer for your question 1, we should use unittest module in the test code.<br>As my answer for your question 2, I am an expert of Python programmer. I have experienced Python for more than a decade.<br>As my answer for your question 3, the use case of this prompt is enterprise software development. They need to create not only software based on test codes but also documents that explain the software. They will write test codes after writing the documents such as OpenAPI Specifications, PlantUML sequence diagrams and PlantUML class diagrams. So, if they get test codes using the prompt based on the documents, they will be happy to save a lot of effort to write test codes.</p>
<h3 id="生成されたプロンプト-2"><a href="#生成されたプロンプト-2" class="headerlink" title="生成されたプロンプト #2"></a>生成されたプロンプト #2</h3><blockquote>
<p>a) Revised Prompt:<br>How can one generate test code in Python using materials like OpenAI Specifications, PlantUML sequence diagrams, and PlantUML class diagrams for enterprise software development, with a focus on utilizing the unittest module?</p>
<p>b) Suggestions:</p>
<ul>
<li>Explain how the unittest module can be used to generate test code based on these materials.</li>
<li>Describe the process of converting diagrams and specifications into Python test code using the unittest module.</li>
<li>Provide examples of how test code can be generated from OpenAPI Specifications, PlantUML sequence diagrams, and PlantUML class diagrams for enterprise software development.</li>
</ul>
<p>c) Questions:</p>
<ol>
<li>Would you like me to focus on any specific aspects of enterprise software development in the prompt?</li>
<li>Are there any additional Python libraries or tools you would like to incorporate in the test code generation process?</li>
</ol>
</blockquote>
<h4 id="回答-2"><a href="#回答-2" class="headerlink" title="回答"></a>回答</h4><p>As my answer for your question 1, I would like you to focus on generate MECE (mutually exclusive and collectively exhaustive) test cases, and organized, structured and clean test codes. So you should consider not only normal test cases but also error cases including corner or edge cases. To realize that, you need to understand how the software is used from the documents and make some assumptions for test data which you need to prepare and use in the test cases.<br>As my answer for your question 2, there are no additional Python libraries or tools. But, to use test data in the test codes, you will use patch module of unittest.mock.</p>
<p>※ 生成されたプロンプト #3 〜 #13 は省略します。(長くなり、かつ英語であるため。) 本記事末尾の Appendix に掲載してありますので、必要に応じてご確認ください。</p>
<h3 id="生成されたプロンプト-14"><a href="#生成されたプロンプト-14" class="headerlink" title="生成されたプロンプト #14"></a>生成されたプロンプト #14</h3><blockquote>
<p>a) Revised Prompt:<br>How can one generate MECE (mutually exclusive and collectively exhaustive) test code in Python for various types of enterprise software using materials like OpenAPI Specifications (in JSON or YAML), PlantUML sequence diagrams (in text), and PlantUML class diagrams (in text), focusing on utilizing the unittest module and patch module of unittest.mock, while generating test cases and preparing test data step-by-step, and allowing the user to specify test targets based on the actors of the sequence diagrams? The test cases should be based on class diagrams first, then considering sequence diagrams, and finally taking into account the OpenAPI specifications when the test target is an API server. The test data should be immutable, defined in the setUp method of the test class that inherits unittest.TestCase, and additional test data can be specified in the test cases if the setUp test data is not sufficient. When using the patch module of unittest.mock for mocking, the @patch(‘…’) decorator should be used instead of the with patch(‘…’) as mock_foo: statement. Additionally, the spy test double pattern should be applied using the assert_called_once_with method of patch.object when applicable for the test case, and the with patch.object(…) as mock_foo: statement can be used in such cases. Each test case should follow the AAA (Arrange-Act-Assert) style. Be mindful of token limitations and avoid exceeding them when generating test code, and omit comments to save the number of characters.</p>
<p>b) Suggestions:</p>
<ul>
<li>Explain how to create organized, structured, and clean test code considering normal, error, corner, and edge cases for different types of enterprise software, with a step-by-step approach, an option to specify test targets based on the actors of the sequence diagrams, a focus on class diagrams followed by sequence diagrams and OpenAPI specifications, the use of setUp method to define immutable test data in the test class that inherits unittest.TestCase, the possibility to add extra test data in the test cases if necessary, the use of @patch(‘…’) decorator for mocking, the application of the spy test double pattern using the assert_called_once_with method of patch.object when applicable, following the AAA (Arrange-Act-Assert) style for each test case, being mindful of token limitations when generating test code, and omitting comments to save the number of characters.</li>
<li>Describe the process of understanding software usage from the documents and making assumptions for test data preparation in a general context, while preparing necessary test data step-by-step, focusing on the specified test targets, considering class diagrams, sequence diagrams, and OpenAPI specifications in the respective order, ensuring the test data is immutable by defining it in the setUp method of the test class, specifying additional test data in the test cases if required, using the @patch(‘…’) decorator for mocking, applying the spy test double pattern with the assert_called_once_with method of patch.object when applicable, adhering to the AAA (Arrange-Act-Assert) style for each test case, taking token limitations into account when generating test code, and refraining from using comments to save the number of characters.</li>
<li>Provide a general approach for generating test code from OpenAPI Specifications (in JSON or YAML), PlantUML sequence diagrams (in text), and PlantUML class diagrams (in text), incorporating the unittest module and patch module of unittest.mock, that can be applied across various types of software, allows users to specify test targets based on the actors of the sequence diagrams, follows the order of considering class diagrams, sequence diagrams, and OpenAPI specifications, defines immutable test data in the setUp method of the test class that inherits unittest.TestCase, allows for additional test data to be specified in the test cases when necessary, employs the @patch(‘…’) decorator for mocking purposes, uses the spy test double pattern with the assert_called_once_with method of patch.object when appropriate, follows the AAA (Arrange-Act-Assert) style for each test case, remains within token limitations when generating test code, and avoids using comments to save the number of characters.</li>
</ul>
<p>c) Questions:</p>
<ol>
<li>Are there any other specific requirements or adjustments you would like me to consider for the revised prompt and suggestions?</li>
<li>Are you satisfied with the revised prompt and suggestions, or would you like me to make further adjustments?</li>
</ol>
</blockquote>
<h4 id="回答-3"><a href="#回答-3" class="headerlink" title="回答"></a>回答</h4><p>As my answer for your question 1, I would like you to organize and bulletize the revised prompt and suggestions. As my answer for your question 2, I am still not satisfied with the revised prompt and suggestions, so please make further adjustments.</p>
<h3 id="生成されたプロンプト-15"><a href="#生成されたプロンプト-15" class="headerlink" title="生成されたプロンプト #15"></a>生成されたプロンプト #15</h3><blockquote>
<p>a) Revised Prompt:<br>Generate MECE (mutually exclusive and collectively exhaustive) test code in Python for various types of enterprise software using materials like:</p>
<ul>
<li>OpenAPI Specifications (in JSON or YAML)</li>
<li>PlantUML sequence diagrams (in text)</li>
<li>PlantUML class diagrams (in text)</li>
</ul>
<p>Focus on utilizing the unittest module and patch module of unittest.mock while:</p>
<ul>
<li>Generating test cases and preparing test data step-by-step</li>
<li>Allowing the user to specify test targets based on the actors of the sequence diagrams</li>
<li>Basing test cases on class diagrams first, then sequence diagrams, and finally OpenAPI specifications for API servers</li>
<li>Defining immutable test data in the setUp method of the test class that inherits unittest.TestCase</li>
<li>Specifying additional test data in test cases if needed</li>
<li>Using the @patch(‘…’) decorator for mocking instead of with patch(‘…’) as mock_foo: statement</li>
<li>Applying the spy test double pattern using the assert_called_once_with method of patch.object when applicable</li>
<li>Using the with patch.object(…) as mock_foo: statement in spy test double pattern cases</li>
<li>Following the AAA (Arrange-Act-Assert) style for each test case</li>
<li>Being mindful of token limitations and avoiding exceeding them when generating test code</li>
<li>Omitting comments to save the number of characters</li>
</ul>
<p>b) Suggestions:</p>
<ul>
<li>Create organized, structured, and clean test code by:<ul>
<li>Following a step-by-step approach</li>
<li>Considering normal, error, corner, and edge cases for different types of enterprise software</li>
<li>Focusing on class diagrams, sequence diagrams, and OpenAPI specifications in that order</li>
<li>Defining immutable test data in the setUp method of the test class that inherits unittest.TestCase</li>
<li>Adding extra test data in the test cases if necessary</li>
<li>Using the @patch(‘…’) decorator for mocking</li>
<li>Applying the spy test double pattern using the assert_called_once_with method of patch.object when applicable</li>
<li>Following the AAA (Arrange-Act-Assert) style for each test case</li>
<li>Being mindful of token limitations when generating test code</li>
<li>Omitting comments to save the number of characters</li>
</ul>
</li>
<li>Understand software usage from the documents and make assumptions for test data preparation by:<ul>
<li>Preparing necessary test data step-by-step</li>
<li>Focusing on specified test targets</li>
<li>Considering class diagrams, sequence diagrams, and OpenAPI specifications in the respective order</li>
<li>Ensuring the test data is immutable by defining it in the setUp method of the test class</li>
<li>Specifying additional test data in the test cases if required</li>
<li>Using the @patch(‘…’) decorator for mocking</li>
<li>Applying the spy test double pattern with the assert_called_once_with method of patch.object when applicable</li>
<li>Adhering to the AAA (Arrange-Act-Assert) style for each test case</li>
<li>Taking token limitations into account when generating test code</li>
<li>Refraining from using comments to save the number of characters</li>
</ul>
</li>
<li>Provide a general approach for generating test code by:<ul>
<li>Incorporating the unittest module and patch module of unittest.mock</li>
<li>Applying the approach across various types of software</li>
<li>Allowing users to specify test targets based on the actors of the sequence diagrams</li>
<li>Following the order of considering class diagrams, sequence diagrams, and OpenAPI specifications</li>
<li>Defining immutable test data in the setUp method of the test class that inherits unittest.TestCase</li>
<li>Allowing for additional test data to be specified in the test cases when necessary</li>
<li>Employing the @patch(‘…’) decorator for mocking purposes</li>
<li>Using the spy test double pattern with the assert_called_once_with method of patch.object when appropriate</li>
<li>Following the AAA (Arrange-Act-Assert) style for each test case</li>
<li>Remaining within token limitations when generating test code</li>
<li>Avoiding using comments to save the number of characters</li>
</ul>
</li>
</ul>
<p>c) Questions:</p>
<ol>
<li>Are there any other specific requirements or adjustments you would like me to consider for the revised prompt and suggestions?</li>
<li>Are you satisfied with the revised prompt and suggestions, or would you like me to make further adjustments?</li>
</ol>
</blockquote>
<p>プロンプトで伝えたいことは伝えたので、ここで終了としておきました。</p>
<p>I don’t think I need to answer those questions because we are done!</p>
<blockquote>
<p>Great! I’m glad the revised prompt and suggestions meet your requirements. If you have any more questions or need further assistance in the future, please don’t hesitate to ask. Have a great day!</p>
</blockquote>
<p>本記事では #14 のプロンプトを採用します。(#15 については <code>Focus on</code> で始まる柱書と各項目との関係 (特に <code>while</code> の範囲) が #14 から変わってしまっているように見受けられるため。)</p>
<p>参考までに、某機械翻訳による和訳を以下に掲載します。</p>
<blockquote>
<p>OpenAPI仕様書（JSONまたはYAML）、PlantUMLシーケンス図（テキスト）、PlantUMLクラス図（テキスト）などの素材を用いて、様々な種類のエンタープライズソフトウェアに対してPythonでMECE（相互排他的かつ集合的に網羅する）テストコードを生成するには、unittest.mockのモジュールとパッチモジュールを活用することに焦点を当て、テストケース生成とテストデータの準備を段階的に行い、シーケンス図のアクターをもとにユーザーがテストターゲットを指定できるようにするには？テストケースは、まずクラス図に基づき、次にシーケンス図を考慮し、最後にテスト対象がAPIサーバーの場合はOpenAPI仕様を考慮したものにする。テストデータは、unittest.TestCaseを継承したテストクラスのsetUpメソッドで定義された不変のものとし、setUpテストデータで足りない場合はテストケースで追加のテストデータを指定することが可能です。モッキングに unittest.mock の patch モジュールを使用する場合、with patch(‘…’) as mock_foo: 文の代わりに @patch(‘…’) デコレータを使用する必要があります。さらに、テストケースに適用できる場合は、patch.object の assert_called_once_with メソッドを使ってスパイテストダブルパターンを適用すべきであり、このような場合は with patch.object(…) as mock_foo: 文を使うことができる。各テストケースは、AAA（Arrange-Act-Assert）スタイルに従うべきです。テストコードを生成する際には、トークンの制限を意識して制限を超えないようにし、コメントを省略して文字数を節約してください。</p>
</blockquote>
<p>また、#14 までで消費したトークンの情報は以下の通りです。</p>
<ul>
<li>Token breakdown:<ul>
<li>Message history: 4868</li>
<li>User query: 0</li>
<li>System Message: 19</li>
<li>Few-shot examples: 1</li>
<li>Max response: 1600</li>
<li>Estimated max tokens: 6488</li>
</ul>
</li>
</ul>
<h2 id="準備"><a href="#準備" class="headerlink" title="準備"></a>準備</h2><p>前回と同様の OpenAPI 仕様、PlantUML シーケンス図、PlantUML クラス図を使います。</p>
<h3 id="プロンプト"><a href="#プロンプト" class="headerlink" title="プロンプト"></a>プロンプト</h3><p>プロンプトは以下の通りです。今回は全文を本記事に掲載します。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">How can one generate MECE (mutually exclusive and collectively exhaustive) test code in Python for various types of enterprise software using materials like OpenAPI Specifications (in JSON or YAML), PlantUML sequence diagrams (in text), and PlantUML class diagrams (in text), focusing on utilizing the unittest module and patch module of unittest.mock, while generating test cases and preparing test data step-by-step, and allowing the user to specify test targets based on the actors of the sequence diagrams? The test cases should be based on class diagrams first, then considering sequence diagrams, and finally taking into account the OpenAPI specifications when the test target is an API server. The test data should be immutable, defined in the setUp method of the test class that inherits unittest.TestCase, and additional test data can be specified in the test cases if the setUp test data is not sufficient. When using the patch module of unittest.mock for mocking, the @patch(&#x27;...&#x27;) decorator should be used instead of the with patch(&#x27;...&#x27;) as mock_foo: statement. Additionally, the spy test double pattern should be applied using the assert_called_once_with method of patch.object when applicable for the test case, and the with patch.object(...) as mock_foo: statement can be used in such cases. Each test case should follow the AAA (Arrange-Act-Assert) style. Be mindful of token limitations and avoid exceeding them when generating test code, and omit comments to save the number of characters.</span><br><span class="line"></span><br><span class="line">* Test target: ペットストアAPI</span><br><span class="line"></span><br><span class="line">* OpenAPI Specifications:</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;swagger&quot;: &quot;2.0&quot;,</span><br><span class="line">  &quot;info&quot;: &#123;</span><br><span class="line">    &quot;version&quot;: &quot;1.0.0&quot;,</span><br><span class="line">    &quot;title&quot;: &quot;Swagger Petstore&quot;,</span><br><span class="line">    &quot;description&quot;: &quot;A sample API that uses a petstore as an example to demonstrate features in the swagger-2.0 specification&quot;,</span><br><span class="line">    &quot;termsOfService&quot;: &quot;http://swagger.io/terms/&quot;,</span><br><span class="line">    &quot;contact&quot;: &#123;</span><br><span class="line">      &quot;name&quot;: &quot;Swagger API Team&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;license&quot;: &#123;</span><br><span class="line">      &quot;name&quot;: &quot;MIT&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;host&quot;: &quot;petstore.swagger.io&quot;,</span><br><span class="line">  &quot;basePath&quot;: &quot;/api&quot;,</span><br><span class="line">  &quot;schemes&quot;: [</span><br><span class="line">    &quot;http&quot;</span><br><span class="line">  ],</span><br><span class="line">  &quot;consumes&quot;: [</span><br><span class="line">    &quot;application/json&quot;</span><br><span class="line">  ],</span><br><span class="line">  &quot;produces&quot;: [</span><br><span class="line">    &quot;application/json&quot;</span><br><span class="line">  ],</span><br><span class="line">  &quot;paths&quot;: &#123;</span><br><span class="line">    &quot;/pets&quot;: &#123;</span><br><span class="line">      &quot;get&quot;: &#123;</span><br><span class="line">        &quot;description&quot;: &quot;Returns all pets from the system that the user has access to&quot;,</span><br><span class="line">        &quot;operationId&quot;: &quot;findPets&quot;,</span><br><span class="line">        &quot;produces&quot;: [</span><br><span class="line">          &quot;application/json&quot;,</span><br><span class="line">          &quot;application/xml&quot;,</span><br><span class="line">          &quot;text/xml&quot;,</span><br><span class="line">          &quot;text/html&quot;</span><br><span class="line">        ],</span><br><span class="line">        &quot;parameters&quot;: [</span><br><span class="line">          &#123;</span><br><span class="line">            &quot;name&quot;: &quot;tags&quot;,</span><br><span class="line">            &quot;in&quot;: &quot;query&quot;,</span><br><span class="line">            &quot;description&quot;: &quot;tags to filter by&quot;,</span><br><span class="line">            &quot;required&quot;: false,</span><br><span class="line">            &quot;type&quot;: &quot;array&quot;,</span><br><span class="line">            &quot;items&quot;: &#123;</span><br><span class="line">              &quot;type&quot;: &quot;string&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;collectionFormat&quot;: &quot;csv&quot;</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            &quot;name&quot;: &quot;limit&quot;,</span><br><span class="line">            &quot;in&quot;: &quot;query&quot;,</span><br><span class="line">            &quot;description&quot;: &quot;maximum number of results to return&quot;,</span><br><span class="line">            &quot;required&quot;: false,</span><br><span class="line">            &quot;type&quot;: &quot;integer&quot;,</span><br><span class="line">            &quot;format&quot;: &quot;int32&quot;</span><br><span class="line">          &#125;</span><br><span class="line">        ],</span><br><span class="line">        &quot;responses&quot;: &#123;</span><br><span class="line">          &quot;200&quot;: &#123;</span><br><span class="line">            &quot;description&quot;: &quot;pet response&quot;,</span><br><span class="line">            &quot;schema&quot;: &#123;</span><br><span class="line">              &quot;type&quot;: &quot;array&quot;,</span><br><span class="line">              &quot;items&quot;: &#123;</span><br><span class="line">                &quot;$ref&quot;: &quot;#/definitions/Pet&quot;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          &quot;default&quot;: &#123;</span><br><span class="line">            &quot;description&quot;: &quot;unexpected error&quot;,</span><br><span class="line">            &quot;schema&quot;: &#123;</span><br><span class="line">              &quot;$ref&quot;: &quot;#/definitions/ErrorModel&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;post&quot;: &#123;</span><br><span class="line">        &quot;description&quot;: &quot;Creates a new pet in the store.  Duplicates are allowed&quot;,</span><br><span class="line">        &quot;operationId&quot;: &quot;addPet&quot;,</span><br><span class="line">        &quot;produces&quot;: [</span><br><span class="line">          &quot;application/json&quot;</span><br><span class="line">        ],</span><br><span class="line">        &quot;parameters&quot;: [</span><br><span class="line">          &#123;</span><br><span class="line">            &quot;name&quot;: &quot;pet&quot;,</span><br><span class="line">            &quot;in&quot;: &quot;body&quot;,</span><br><span class="line">            &quot;description&quot;: &quot;Pet to add to the store&quot;,</span><br><span class="line">            &quot;required&quot;: true,</span><br><span class="line">            &quot;schema&quot;: &#123;</span><br><span class="line">              &quot;$ref&quot;: &quot;#/definitions/NewPet&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        ],</span><br><span class="line">        &quot;responses&quot;: &#123;</span><br><span class="line">          &quot;200&quot;: &#123;</span><br><span class="line">            &quot;description&quot;: &quot;pet response&quot;,</span><br><span class="line">            &quot;schema&quot;: &#123;</span><br><span class="line">              &quot;$ref&quot;: &quot;#/definitions/Pet&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          &quot;default&quot;: &#123;</span><br><span class="line">            &quot;description&quot;: &quot;unexpected error&quot;,</span><br><span class="line">            &quot;schema&quot;: &#123;</span><br><span class="line">              &quot;$ref&quot;: &quot;#/definitions/ErrorModel&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;/pets/&#123;id&#125;&quot;: &#123;</span><br><span class="line">      &quot;get&quot;: &#123;</span><br><span class="line">        &quot;description&quot;: &quot;Returns a user based on a single ID, if the user does not have access to the pet&quot;,</span><br><span class="line">        &quot;operationId&quot;: &quot;findPetById&quot;,</span><br><span class="line">        &quot;produces&quot;: [</span><br><span class="line">          &quot;application/json&quot;,</span><br><span class="line">          &quot;application/xml&quot;,</span><br><span class="line">          &quot;text/xml&quot;,</span><br><span class="line">          &quot;text/html&quot;</span><br><span class="line">        ],</span><br><span class="line">        &quot;parameters&quot;: [</span><br><span class="line">          &#123;</span><br><span class="line">            &quot;name&quot;: &quot;id&quot;,</span><br><span class="line">            &quot;in&quot;: &quot;path&quot;,</span><br><span class="line">            &quot;description&quot;: &quot;ID of pet to fetch&quot;,</span><br><span class="line">            &quot;required&quot;: true,</span><br><span class="line">            &quot;type&quot;: &quot;integer&quot;,</span><br><span class="line">            &quot;format&quot;: &quot;int64&quot;</span><br><span class="line">          &#125;</span><br><span class="line">        ],</span><br><span class="line">        &quot;responses&quot;: &#123;</span><br><span class="line">          &quot;200&quot;: &#123;</span><br><span class="line">            &quot;description&quot;: &quot;pet response&quot;,</span><br><span class="line">            &quot;schema&quot;: &#123;</span><br><span class="line">              &quot;$ref&quot;: &quot;#/definitions/Pet&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          &quot;default&quot;: &#123;</span><br><span class="line">            &quot;description&quot;: &quot;unexpected error&quot;,</span><br><span class="line">            &quot;schema&quot;: &#123;</span><br><span class="line">              &quot;$ref&quot;: &quot;#/definitions/ErrorModel&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;delete&quot;: &#123;</span><br><span class="line">        &quot;description&quot;: &quot;deletes a single pet based on the ID supplied&quot;,</span><br><span class="line">        &quot;operationId&quot;: &quot;deletePet&quot;,</span><br><span class="line">        &quot;parameters&quot;: [</span><br><span class="line">          &#123;</span><br><span class="line">            &quot;name&quot;: &quot;id&quot;,</span><br><span class="line">            &quot;in&quot;: &quot;path&quot;,</span><br><span class="line">            &quot;description&quot;: &quot;ID of pet to delete&quot;,</span><br><span class="line">            &quot;required&quot;: true,</span><br><span class="line">            &quot;type&quot;: &quot;integer&quot;,</span><br><span class="line">            &quot;format&quot;: &quot;int64&quot;</span><br><span class="line">          &#125;</span><br><span class="line">        ],</span><br><span class="line">        &quot;responses&quot;: &#123;</span><br><span class="line">          &quot;204&quot;: &#123;</span><br><span class="line">            &quot;description&quot;: &quot;pet deleted&quot;</span><br><span class="line">          &#125;,</span><br><span class="line">          &quot;default&quot;: &#123;</span><br><span class="line">            &quot;description&quot;: &quot;unexpected error&quot;,</span><br><span class="line">            &quot;schema&quot;: &#123;</span><br><span class="line">              &quot;$ref&quot;: &quot;#/definitions/ErrorModel&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;definitions&quot;: &#123;</span><br><span class="line">    &quot;Pet&quot;: &#123;</span><br><span class="line">      &quot;type&quot;: &quot;object&quot;,</span><br><span class="line">      &quot;allOf&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;$ref&quot;: &quot;#/definitions/NewPet&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;required&quot;: [</span><br><span class="line">            &quot;id&quot;</span><br><span class="line">          ],</span><br><span class="line">          &quot;properties&quot;: &#123;</span><br><span class="line">            &quot;id&quot;: &#123;</span><br><span class="line">              &quot;type&quot;: &quot;integer&quot;,</span><br><span class="line">              &quot;format&quot;: &quot;int64&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;NewPet&quot;: &#123;</span><br><span class="line">      &quot;type&quot;: &quot;object&quot;,</span><br><span class="line">      &quot;required&quot;: [</span><br><span class="line">        &quot;name&quot;</span><br><span class="line">      ],</span><br><span class="line">      &quot;properties&quot;: &#123;</span><br><span class="line">        &quot;name&quot;: &#123;</span><br><span class="line">          &quot;type&quot;: &quot;string&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;tag&quot;: &#123;</span><br><span class="line">          &quot;type&quot;: &quot;string&quot;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;ErrorModel&quot;: &#123;</span><br><span class="line">      &quot;type&quot;: &quot;object&quot;,</span><br><span class="line">      &quot;required&quot;: [</span><br><span class="line">        &quot;code&quot;,</span><br><span class="line">        &quot;message&quot;</span><br><span class="line">      ],</span><br><span class="line">      &quot;properties&quot;: &#123;</span><br><span class="line">        &quot;code&quot;: &#123;</span><br><span class="line">          &quot;type&quot;: &quot;integer&quot;,</span><br><span class="line">          &quot;format&quot;: &quot;int32&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;message&quot;: &#123;</span><br><span class="line">          &quot;type&quot;: &quot;string&quot;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">* PlantUML sequence diagrams:</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">@startuml</span><br><span class="line"></span><br><span class="line">title ペット</span><br><span class="line">header %page% of %lastpage%</span><br><span class="line">footer Copyright(c) All rights reserved.</span><br><span class="line"></span><br><span class="line">autoactivate on</span><br><span class="line">autonumber &quot;&lt;b&gt;[00]&quot;</span><br><span class="line"></span><br><span class="line">actor ユーザー as user</span><br><span class="line">entity ペットストアUI as ui</span><br><span class="line">entity ペットストアAPI as api</span><br><span class="line">database データベース as db</span><br><span class="line"></span><br><span class="line">== ペットのリストを取得 ==</span><br><span class="line"></span><br><span class="line">user -&gt; ui : ペットリストボタンをクリック</span><br><span class="line">ui -&gt; api : findPets</span><br><span class="line">api -&gt; db : SELECT * FROM pets</span><br><span class="line">return</span><br><span class="line">return 200, pet response</span><br><span class="line">return ペットのリストを表示</span><br><span class="line"></span><br><span class="line">== ペットの詳細を取得 ==</span><br><span class="line"></span><br><span class="line">user -&gt; ui : ペットの詳細ボタンをクリック</span><br><span class="line">ui -&gt; api : findPetById</span><br><span class="line">api -&gt; db : SELECT * FROM pets WHERE id = $&#123;pet_id&#125;</span><br><span class="line">return</span><br><span class="line">return 200, pet response</span><br><span class="line">return ペットの詳細を表示</span><br><span class="line"></span><br><span class="line">== ペットを購入 ==</span><br><span class="line"></span><br><span class="line">user -&gt; ui : ペットの購入ボタンをクリック</span><br><span class="line">ui -&gt; api : addPet</span><br><span class="line">group transaction</span><br><span class="line">    api -&gt; db : transaction</span><br><span class="line">    api -&gt; db : INSERT INTO orders VALUES ($&#123;user_id&#125;, $&#123;pet_id&#125;, $&#123;datetime&#125;, $&#123;created_at&#125;, $&#123;updated_at&#125;)</span><br><span class="line">    api -&gt; db : DELETE FROM pets WHERE pet_id = $&#123;pet_id&#125;</span><br><span class="line">    api -&gt; db : commit</span><br><span class="line">    return</span><br><span class="line">    return</span><br><span class="line">    return</span><br><span class="line">    return</span><br><span class="line">end</span><br><span class="line">return 200, pet response</span><br><span class="line">return 購入完了画面を表示</span><br><span class="line"></span><br><span class="line">== ペットの登録を削除 ==</span><br><span class="line"></span><br><span class="line">user -&gt; ui : ペットの登録削除ボタンをクリック</span><br><span class="line">ui -&gt; api : deletePet</span><br><span class="line">group transaction</span><br><span class="line">    api -&gt; db : DELETE FROM pets WHERE pet_id = (SELECT id FROM orders WHERE pet_id = $&#123;pet_id&#125; AND user_id = $&#123;user_id&#125;)</span><br><span class="line">    api -&gt; db : DELETE FROM orders WHERE pet_id = $&#123;pet_id&#125; AND user_id = $&#123;user_id&#125;</span><br><span class="line">    return</span><br><span class="line">    return</span><br><span class="line">end</span><br><span class="line">return 204, pet deleted</span><br><span class="line">return 削除完了画面を表示</span><br><span class="line"></span><br><span class="line">== ペットの購入に失敗 ==</span><br><span class="line"></span><br><span class="line">user -&gt; ui : ペットの購入ボタンをクリック</span><br><span class="line">ui -&gt; api : addPet</span><br><span class="line">group transaction</span><br><span class="line">    api -&gt; db : transaction</span><br><span class="line">    api -&gt; db : INSERT INTO orders VALUES ($&#123;user_id&#125;, $&#123;pet_id&#125;, $&#123;datetime&#125;, $&#123;created_at&#125;, $&#123;updated_at&#125;)</span><br><span class="line">    api -&gt; db !! : DELETE FROM pets WHERE pet_id = $&#123;pet_id&#125;</span><br><span class="line">    api -&gt; db : rollback</span><br><span class="line">    return</span><br><span class="line">    return</span><br><span class="line">    return</span><br><span class="line">end</span><br><span class="line">return 500, unexpected error</span><br><span class="line">return 購入失敗画面を表示</span><br><span class="line"></span><br><span class="line">@enduml</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">* PlantUML class diagrams:</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">@startuml</span><br><span class="line"></span><br><span class="line">class User &#123;</span><br><span class="line">    - id</span><br><span class="line">    - name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Pet &#123;</span><br><span class="line">    - id</span><br><span class="line">    - name</span><br><span class="line">    - type</span><br><span class="line">    - tag</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Order &#123;</span><br><span class="line">    - id</span><br><span class="line">    - user_id</span><br><span class="line">    - pet_id</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Order &quot;1&quot; -- &quot;*&quot; User</span><br><span class="line">Order &quot;1&quot; -- &quot;*&quot; Pet</span><br><span class="line"></span><br><span class="line">@enduml</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<h3 id="モデル"><a href="#モデル" class="headerlink" title="モデル"></a>モデル</h3><p>前回同様 <code>text-davinci-003</code> を使用します。</p>
<h3 id="入出力インターフェース"><a href="#入出力インターフェース" class="headerlink" title="入出力インターフェース"></a>入出力インターフェース</h3><p>前回同様 <a target="_blank" rel="noopener" href="https://oai.azure.com/portal/">Azure OpenAI Studio</a> にある <a target="_blank" rel="noopener" href="https://oai.azure.com/portal/playground">Playground</a> を使用します。</p>
<h3 id="実行手順"><a href="#実行手順" class="headerlink" title="実行手順"></a>実行手順</h3><p>前回同様です。</p>
<h2 id="結果"><a href="#結果" class="headerlink" title="結果"></a>結果</h2><p>上記プロンプトを 5回実行し、それぞれの結果を取得しました。以下、各結果に関する、プロンプトにおける指示内容に対する形式チェック結果です。(なお、指示項目の洗い出しにあたっては生成したプロンプトの #15 を利用しました。)</p>
<table>
<thead>
<tr>
<th align="right">#</th>
<th>指示</th>
<th>結果1</th>
<th>結果2</th>
<th>結果3</th>
<th>結果4</th>
<th>結果5</th>
</tr>
</thead>
<tbody><tr>
<td align="right">1</td>
<td>MECE (mutually exclusive and collectively exhaustive) test code</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td align="right">2</td>
<td>in Python</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td align="right">3</td>
<td>utilizing the unittest module and patch module of unittest.mock</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td align="right">4</td>
<td>Allowing the user to specify test targets based on the actors of the sequence diagrams</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td align="right">5</td>
<td>Basing test cases on class diagrams first,</td>
<td>✓</td>
<td>-</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td align="right">6</td>
<td>then sequence diagrams,</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td align="right">7</td>
<td>and finally OpenAPI specifications for API servers</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>-</td>
</tr>
<tr>
<td align="right">8</td>
<td>Defining immutable test data in the setUp method of the test class that inherits unittest.TestCase</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td align="right">9</td>
<td>Specifying additional test data in test cases if needed</td>
<td>-</td>
<td>-</td>
<td>✓</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td align="right">10</td>
<td>Using the <code>@patch(&#39;...&#39;)</code> decorator for mocking instead of <code>with patch(&#39;...&#39;) as mock_foo:</code> statement</td>
<td>✓</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td align="right">11</td>
<td>Applying the spy test double pattern using the <code>assert_called_once_with</code> method of <code>patch.object</code> when applicable</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td align="right">12</td>
<td>Using the <code>with patch.object(...) as mock_foo:</code> statement in spy test double pattern cases</td>
<td>-</td>
<td>✓</td>
<td>✓</td>
<td>-</td>
<td>✓</td>
</tr>
<tr>
<td align="right">13</td>
<td>Following the AAA (Arrange-Act-Assert) style for each test case</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td align="right">14</td>
<td>Being mindful of token limitations and avoiding exceeding them when generating test code</td>
<td>✓</td>
<td>-</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td align="right">15</td>
<td>Omitting comments to save the number of characters</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>✓</td>
</tr>
</tbody></table>
<p>各結果ともに多くの指示内容を満たしています。<br>指示項目ごとの重要度の高低を加味すると、結果1 が頭一つ抜きん出ています。</p>
<p>以下、個別の結果と、それに対する評価です。なお、上記の形式チェックで確認したポイントについては個別の評価においては言及しません。</p>
<h3 id="結果1"><a href="#結果1" class="headerlink" title="結果1"></a>結果1</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> unittest</span><br><span class="line"><span class="keyword">from</span> unittest.mock <span class="keyword">import</span> patch, patch.<span class="built_in">object</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestPetStoreAPI</span>(unittest.TestCase):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setUp</span>(<span class="params">self</span>):</span><br><span class="line">        self.pet_data = &#123;</span><br><span class="line">            <span class="string">&#x27;id&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Fido&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;type&#x27;</span>: <span class="string">&#x27;dog&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;tag&#x27;</span>: <span class="string">&#x27;cute&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">        self.order_data = &#123;</span><br><span class="line">            <span class="string">&#x27;id&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="string">&#x27;user_id&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="string">&#x27;pet_id&#x27;</span>: <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">    @patch(<span class="params"><span class="string">&#x27;petstore.api.findPets&#x27;</span></span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_find_pets</span>(<span class="params">self, mock_find_pets</span>):</span><br><span class="line">        <span class="comment"># Arrange</span></span><br><span class="line">        expected_response = &#123;</span><br><span class="line">            <span class="string">&#x27;status&#x27;</span>: <span class="number">200</span>,</span><br><span class="line">            <span class="string">&#x27;data&#x27;</span>: [self.pet_data]</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Act</span></span><br><span class="line">        mock_find_pets.return_value = expected_response</span><br><span class="line">        response = petstore.api.findPets()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Assert</span></span><br><span class="line">        self.assertEqual(response, expected_response)</span><br><span class="line">        mock_find_pets.assert_called_once_with()</span><br><span class="line"></span><br><span class="line"><span class="meta">    @patch(<span class="params"><span class="string">&#x27;petstore.api.findPetById&#x27;</span></span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_find_pet_by_id</span>(<span class="params">self, mock_find_pet_by_id</span>):</span><br><span class="line">        <span class="comment"># Arrange</span></span><br><span class="line">        expected_response = &#123;</span><br><span class="line">            <span class="string">&#x27;status&#x27;</span>: <span class="number">200</span>,</span><br><span class="line">            <span class="string">&#x27;data&#x27;</span>: self.pet_data</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Act</span></span><br><span class="line">        mock_find_pet_by_id.return_value = expected_response</span><br><span class="line">        response = petstore.api.findPetById(self.pet_data[<span class="string">&#x27;id&#x27;</span>])</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Assert</span></span><br><span class="line">        self.assertEqual(response, expected_response)</span><br><span class="line">        mock_find_pet_by_id.assert_called_once_with(self.pet_data[<span class="string">&#x27;id&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="meta">    @patch(<span class="params"><span class="string">&#x27;petstore.api.addPet&#x27;</span></span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_add_pet</span>(<span class="params">self, mock_add_pet</span>):</span><br><span class="line">        <span class="comment"># Arrange</span></span><br><span class="line">        expected_response = &#123;</span><br><span class="line">            <span class="string">&#x27;status&#x27;</span>: <span class="number">200</span>,</span><br><span class="line">            <span class="string">&#x27;data&#x27;</span>: self.pet_data</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Act</span></span><br><span class="line">        mock_add_pet.return_value = expected_response</span><br><span class="line">        response = petstore.api.addPet(self.pet_data)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Assert</span></span><br><span class="line">        self.assertEqual(response, expected_response)</span><br><span class="line">        mock_add_pet.assert_called_once_with(self.pet_data)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @patch(<span class="params"><span class="string">&#x27;petstore.api.deletePet&#x27;</span></span>)</span></span><br><span class="line"><span class="meta">    @patch.object(<span class="params">petstore.api, <span class="string">&#x27;findPetById&#x27;</span>, return_value=&#123;<span class="string">&#x27;status&#x27;</span>: <span class="number">200</span>, <span class="string">&#x27;data&#x27;</span>: self.pet_data&#125;</span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_delete_pet</span>(<span class="params">self, mock_find_pet_by_id, mock_delete_pet</span>):</span><br><span class="line">        <span class="comment"># Arrange</span></span><br><span class="line">        expected_response = &#123;</span><br><span class="line">            <span class="string">&#x27;status&#x27;</span>: <span class="number">204</span>,</span><br><span class="line">            <span class="string">&#x27;data&#x27;</span>: <span class="literal">None</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Act</span></span><br><span class="line">        mock_delete_pet.return_value = expected_response</span><br><span class="line">        response = petstore.api.deletePet(self.pet_data[<span class="string">&#x27;id&#x27;</span>])</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Assert</span></span><br><span class="line">        self.assertEqual(response, expected_response)</span><br><span class="line">        mock_find_pet_by_id.assert_called_once_with(self.pet_data[<span class="string">&#x27;id&#x27;</span>])</span><br><span class="line">        mock_delete_pet.assert_called_once_with(self.pet_data[<span class="string">&#x27;id&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="meta">    @patch(<span class="params"><span class="string">&#x27;petstore.api.addPet&#x27;</span></span>)</span></span><br><span class="line"><span class="meta">    @patch.object(<span class="params">petstore.api, <span class="string">&#x27;findPetById&#x27;</span>, return_value=&#123;<span class="string">&#x27;status&#x27;</span>: <span class="number">200</span>, <span class="string">&#x27;data&#x27;</span>: self.pet_data&#125;</span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_add_pet_failure</span>(<span class="params">self, mock_find_pet_by_id, mock_add_pet</span>):</span><br><span class="line">        <span class="comment"># Arrange</span></span><br><span class="line">        expected_response = &#123;</span><br><span class="line">            <span class="string">&#x27;status&#x27;</span>: <span class="number">500</span>,</span><br><span class="line">            <span class="string">&#x27;data&#x27;</span>: <span class="literal">None</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Act</span></span><br><span class="line">        mock_add_pet.return_value = expected_response</span><br><span class="line">        response = petstore.api.addPet(self.pet_data)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Assert</span></span><br><span class="line">        self.assertEqual(response, expected_response)</span><br><span class="line">        mock_find_pet_by_id.assert_called_once_with(self.pet_data[<span class="string">&#x27;id&#x27;</span>])</span><br><span class="line">        mock_add_pet.assert_called_once_with(self.pet_data)</span><br></pre></td></tr></table></figure>

<h4 id="良い点"><a href="#良い点" class="headerlink" title="良い点"></a>良い点</h4><ul>
<li>特に言及すべき点は無し</li>
</ul>
<h4 id="改善点"><a href="#改善点" class="headerlink" title="改善点"></a>改善点</h4><ul>
<li>テストデータ <code>self.order_data</code> が使われていない。</li>
</ul>
<h3 id="結果2"><a href="#結果2" class="headerlink" title="結果2"></a>結果2</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> unittest</span><br><span class="line"><span class="keyword">from</span> unittest.mock <span class="keyword">import</span> patch, patch.<span class="built_in">object</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestPetStoreAPI</span>(unittest.TestCase):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setUp</span>(<span class="params">self</span>):</span><br><span class="line">        self.pet_list = [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">&#x27;id&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Fido&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;type&#x27;</span>: <span class="string">&#x27;dog&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;tag&#x27;</span>: <span class="string">&#x27;friendly&#x27;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">&#x27;id&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">                <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Fluffy&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;type&#x27;</span>: <span class="string">&#x27;cat&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;tag&#x27;</span>: <span class="string">&#x27;playful&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">        self.user_id = <span class="number">1</span></span><br><span class="line">        self.pet_id = <span class="number">1</span></span><br><span class="line">        self.datetime = <span class="string">&#x27;2020-01-01 00:00:00&#x27;</span></span><br><span class="line">        self.created_at = <span class="string">&#x27;2020-01-01 00:00:00&#x27;</span></span><br><span class="line">        self.updated_at = <span class="string">&#x27;2020-01-01 00:00:00&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_find_pets</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># Arrange</span></span><br><span class="line">        expected_response = &#123;</span><br><span class="line">            <span class="string">&#x27;status&#x27;</span>: <span class="number">200</span>,</span><br><span class="line">            <span class="string">&#x27;data&#x27;</span>: self.pet_list</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Act</span></span><br><span class="line">        <span class="keyword">with</span> patch(<span class="string">&#x27;petstore.findPets&#x27;</span>) <span class="keyword">as</span> mock_find_pets:</span><br><span class="line">            mock_find_pets.return_value = expected_response</span><br><span class="line">            response = petstore.findPets()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Assert</span></span><br><span class="line">        self.assertEqual(response, expected_response)</span><br><span class="line">        mock_find_pets.assert_called_once_with()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_find_pet_by_id</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># Arrange</span></span><br><span class="line">        expected_response = &#123;</span><br><span class="line">            <span class="string">&#x27;status&#x27;</span>: <span class="number">200</span>,</span><br><span class="line">            <span class="string">&#x27;data&#x27;</span>: self.pet_list[<span class="number">0</span>]</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Act</span></span><br><span class="line">        <span class="keyword">with</span> patch(<span class="string">&#x27;petstore.findPetById&#x27;</span>) <span class="keyword">as</span> mock_find_pet_by_id:</span><br><span class="line">            mock_find_pet_by_id.return_value = expected_response</span><br><span class="line">            response = petstore.findPetById(self.pet_id)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Assert</span></span><br><span class="line">        self.assertEqual(response, expected_response)</span><br><span class="line">        mock_find_pet_by_id.assert_called_once_with(self.pet_id)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_add_pet_success</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># Arrange</span></span><br><span class="line">        expected_response = &#123;</span><br><span class="line">            <span class="string">&#x27;status&#x27;</span>: <span class="number">200</span>,</span><br><span class="line">            <span class="string">&#x27;data&#x27;</span>: self.pet_list[<span class="number">0</span>]</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Act</span></span><br><span class="line">        <span class="keyword">with</span> patch(<span class="string">&#x27;petstore.addPet&#x27;</span>) <span class="keyword">as</span> mock_add_pet:</span><br><span class="line">            <span class="keyword">with</span> patch.<span class="built_in">object</span>(db, <span class="string">&#x27;transaction&#x27;</span>) <span class="keyword">as</span> mock_transaction:</span><br><span class="line">                <span class="keyword">with</span> patch.<span class="built_in">object</span>(db, <span class="string">&#x27;INSERT INTO orders VALUES&#x27;</span>) <span class="keyword">as</span> mock_insert_orders:</span><br><span class="line">                    <span class="keyword">with</span> patch.<span class="built_in">object</span>(db, <span class="string">&#x27;DELETE FROM pets WHERE pet_id =&#x27;</span>) <span class="keyword">as</span> mock_delete_pets:</span><br><span class="line">                        <span class="keyword">with</span> patch.<span class="built_in">object</span>(db, <span class="string">&#x27;commit&#x27;</span>) <span class="keyword">as</span> mock_commit:</span><br><span class="line">                            mock_add_pet.return_value = expected_response</span><br><span class="line">                            response = petstore.addPet(self.user_id, self.pet_id, self.datetime, self.created_at, self.updated_at)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Assert</span></span><br><span class="line">        self.assertEqual(response, expected_response)</span><br><span class="line">        mock_add_pet.assert_called_once_with(self.user_id, self.pet_id, self.datetime, self.created_at, self.updated_at)</span><br><span class="line">        mock_transaction.assert_called_once_with()</span><br><span class="line">        mock_insert_orders.assert_called_once_with(self.user_id, self.pet_id, self.datetime, self.created_at, self.updated_at)</span><br><span class="line">        mock_delete_pets.assert_called_once_with(self.pet_id)</span><br><span class="line">        mock_commit.assert_called_once_with()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_add_pet_failure</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># Arrange</span></span><br><span class="line">        expected_response = &#123;</span><br><span class="line">            <span class="string">&#x27;status&#x27;</span>: <span class="number">500</span>,</span><br><span class="line">            <span class="string">&#x27;data&#x27;</span>: &#123;</span><br><span class="line">                <span class="string">&#x27;code&#x27;</span>: <span class="number">500</span>,</span><br><span class="line">                <span class="string">&#x27;message&#x27;</span>: <span class="string">&#x27;unexpected error&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Act</span></span><br><span class="line">        <span class="keyword">with</span> patch(<span class="string">&#x27;petstore.addPet&#x27;</span>) <span class="keyword">as</span> mock_add_pet:</span><br><span class="line">            <span class="keyword">with</span> patch.<span class="built_in">object</span>(db, <span class="string">&#x27;transaction&#x27;</span>) <span class="keyword">as</span> mock_transaction:</span><br><span class="line">                <span class="keyword">with</span> patch.<span class="built_in">object</span>(db, <span class="string">&#x27;INSERT INTO orders VALUES&#x27;</span>) <span class="keyword">as</span> mock_insert_orders:</span><br><span class="line">                    <span class="keyword">with</span> patch.<span class="built_in">object</span>(db, <span class="string">&#x27;DELETE FROM pets WHERE pet_id =&#x27;</span>) <span class="keyword">as</span> mock_delete_pets:</span><br><span class="line">                        <span class="keyword">with</span> patch.<span class="built_in">object</span>(db, <span class="string">&#x27;rollback&#x27;</span>) <span class="keyword">as</span> mock_rollback:</span><br><span class="line">                            mock_add_pet.return_value = expected_response</span><br><span class="line">                            response = petstore.addPet(self.user_id, self.pet_id, self.datetime, self.created_at, self.updated_at)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Assert</span></span><br><span class="line">        self.assertEqual(response, expected_response)</span><br><span class="line">        mock_add_pet.assert_called_once_with(self.user_id, self.pet_id, self.datetime, self.created_at, self.updated_at)</span><br><span class="line">        mock_transaction.assert_called_once_with()</span><br><span class="line">        mock_insert_orders.assert_called_once_with(self.user_id, self.pet_id, self.datetime, self.created_at, self.updated_at)</span><br><span class="line">        mock_delete_pets.assert_called_once_with(self.pet_id)</span><br><span class="line">        mock_rollback.assert_called_once_with()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_delete_pet</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># Arrange</span></span><br><span class="line">        expected_response = &#123;</span><br><span class="line">            <span class="string">&#x27;status&#x27;</span>: <span class="number">204</span>,</span><br><span class="line">            <span class="string">&#x27;data&#x27;</span>:</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Completions call failed:<br>This model’s maximum context length is 4097 tokens, however you requested 4112 tokens (4012 in your prompt; 100 for the completion). Please reduce your prompt; or completion length.</p>
</blockquote>
<h4 id="良い点-1"><a href="#良い点-1" class="headerlink" title="良い点"></a>良い点</h4><ul>
<li>シーケンス図に記述された SQL から <code>datetime</code>, <code>created_at</code>, <code>updated_at</code> を拾って補完した。</li>
<li>トランザクションが細かくテストされている。</li>
</ul>
<h4 id="改善点-1"><a href="#改善点-1" class="headerlink" title="改善点"></a>改善点</h4><ul>
<li><code>with</code> ステートメントのネストが深い</li>
</ul>
<h3 id="結果3"><a href="#結果3" class="headerlink" title="結果3"></a>結果3</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> unittest</span><br><span class="line"><span class="keyword">from</span> unittest.mock <span class="keyword">import</span> patch, patch.<span class="built_in">object</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestPetStoreAPI</span>(unittest.TestCase):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setUp</span>(<span class="params">self</span>):</span><br><span class="line">        self.test_pets = [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">&quot;id&quot;</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="string">&quot;name&quot;</span>: <span class="string">&quot;Cat&quot;</span>,</span><br><span class="line">                <span class="string">&quot;type&quot;</span>: <span class="string">&quot;cat&quot;</span>,</span><br><span class="line">                <span class="string">&quot;tag&quot;</span>: <span class="string">&quot;feline&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">&quot;id&quot;</span>: <span class="number">2</span>,</span><br><span class="line">                <span class="string">&quot;name&quot;</span>: <span class="string">&quot;Dog&quot;</span>,</span><br><span class="line">                <span class="string">&quot;type&quot;</span>: <span class="string">&quot;dog&quot;</span>,</span><br><span class="line">                <span class="string">&quot;tag&quot;</span>: <span class="string">&quot;canine&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">        self.test_user = &#123;</span><br><span class="line">            <span class="string">&quot;id&quot;</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="string">&quot;name&quot;</span>: <span class="string">&quot;John Doe&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">        self.test_order = &#123;</span><br><span class="line">            <span class="string">&quot;id&quot;</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="string">&quot;user_id&quot;</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="string">&quot;pet_id&quot;</span>: <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_find_pets</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># Arrange</span></span><br><span class="line">        expected_pets = self.test_pets</span><br><span class="line">        tags = [<span class="string">&quot;feline&quot;</span>, <span class="string">&quot;canine&quot;</span>]</span><br><span class="line">        limit = <span class="number">2</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># Act</span></span><br><span class="line">        <span class="keyword">with</span> patch(<span class="string">&#x27;petstore.findPets&#x27;</span>) <span class="keyword">as</span> mock_find_pets:</span><br><span class="line">            mock_find_pets.return_value = expected_pets</span><br><span class="line">            actual_pets = petstore.findPets(tags, limit)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Assert</span></span><br><span class="line">        self.assertEqual(expected_pets, actual_pets)</span><br><span class="line">        mock_find_pets.assert_called_once_with(tags, limit)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_find_pet_by_id</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># Arrange</span></span><br><span class="line">        expected_pet = self.test_pets[<span class="number">0</span>]</span><br><span class="line">        pet_id = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># Act</span></span><br><span class="line">        <span class="keyword">with</span> patch(<span class="string">&#x27;petstore.findPetById&#x27;</span>) <span class="keyword">as</span> mock_find_pet_by_id:</span><br><span class="line">            mock_find_pet_by_id.return_value = expected_pet</span><br><span class="line">            actual_pet = petstore.findPetById(pet_id)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Assert</span></span><br><span class="line">        self.assertEqual(expected_pet, actual_pet)</span><br><span class="line">        mock_find_pet_by_id.assert_called_once_with(pet_id)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_add_pet_success</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># Arrange</span></span><br><span class="line">        expected_pet = self.test_pets[<span class="number">0</span>]</span><br><span class="line">        pet = &#123;</span><br><span class="line">            <span class="string">&quot;name&quot;</span>: <span class="string">&quot;Cat&quot;</span>,</span><br><span class="line">            <span class="string">&quot;type&quot;</span>: <span class="string">&quot;cat&quot;</span>,</span><br><span class="line">            <span class="string">&quot;tag&quot;</span>: <span class="string">&quot;feline&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Act</span></span><br><span class="line">        <span class="keyword">with</span> patch(<span class="string">&#x27;petstore.addPet&#x27;</span>) <span class="keyword">as</span> mock_add_pet:</span><br><span class="line">            mock_add_pet.return_value = expected_pet</span><br><span class="line">            <span class="keyword">with</span> patch.<span class="built_in">object</span>(petstore, <span class="string">&#x27;transaction&#x27;</span>) <span class="keyword">as</span> mock_transaction:</span><br><span class="line">                mock_transaction.return_value = <span class="literal">None</span></span><br><span class="line">                actual_pet = petstore.addPet(pet)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Assert</span></span><br><span class="line">        self.assertEqual(expected_pet, actual_pet)</span><br><span class="line">        mock_add_pet.assert_called_once_with(pet)</span><br><span class="line">        mock_transaction.assert_called_once()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_add_pet_failure</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># Arrange</span></span><br><span class="line">        expected_error = &#123;</span><br><span class="line">            <span class="string">&quot;code&quot;</span>: <span class="number">500</span>,</span><br><span class="line">            <span class="string">&quot;message&quot;</span>: <span class="string">&quot;unexpected error&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">        pet = &#123;</span><br><span class="line">            <span class="string">&quot;name&quot;</span>: <span class="string">&quot;Cat&quot;</span>,</span><br><span class="line">            <span class="string">&quot;type&quot;</span>: <span class="string">&quot;cat&quot;</span>,</span><br><span class="line">            <span class="string">&quot;tag&quot;</span>: <span class="string">&quot;feline&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Act</span></span><br><span class="line">        <span class="keyword">with</span> patch(<span class="string">&#x27;petstore.addPet&#x27;</span>) <span class="keyword">as</span> mock_add_pet:</span><br><span class="line">            mock_add_pet.return_value = expected_error</span><br><span class="line">            <span class="keyword">with</span> patch.<span class="built_in">object</span>(petstore, <span class="string">&#x27;transaction&#x27;</span>) <span class="keyword">as</span> mock_transaction:</span><br><span class="line">                mock_transaction.return_value = <span class="literal">None</span></span><br><span class="line">                actual_error = petstore.addPet(pet)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Assert</span></span><br><span class="line">        self.assertEqual(expected_error, actual_error)</span><br><span class="line">        mock_add_pet.assert_called_once_with(pet)</span><br><span class="line">        mock_transaction.assert_called_once()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_delete_pet</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># Arrange</span></span><br><span class="line">        expected_response = &#123;</span><br><span class="line">            <span class="string">&quot;code&quot;</span>: <span class="number">204</span>,</span><br><span class="line">            <span class="string">&quot;message&quot;</span>: <span class="string">&quot;pet deleted&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">        pet_id = <span class="number">1</span></span><br><span class="line">        user_id = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># Act</span></span><br><span class="line">        <span class="keyword">with</span> patch(<span class="string">&#x27;petstore.deletePet&#x27;</span>) <span class="keyword">as</span> mock_delete_pet:</span><br><span class="line">            mock_delete_pet.return_value = expected_response</span><br><span class="line">            <span class="keyword">with</span> patch.<span class="built_in">object</span>(petstore, <span class="string">&#x27;transaction&#x27;</span>) <span class="keyword">as</span> mock_transaction:</span><br><span class="line">                mock_transaction.return_value = <span class="literal">None</span></span><br><span class="line">                actual_response = petstore.deletePet(pet_id, user_id)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Assert</span></span><br><span class="line">        self.assertEqual(expected_response, actual_response)</span><br><span class="line">        mock_delete_pet.assert_called_once_with(pet_id, user_id)</span><br><span class="line">        mock_transaction.assert_called_once()</span><br></pre></td></tr></table></figure>

<h4 id="良い点-2"><a href="#良い点-2" class="headerlink" title="良い点"></a>良い点</h4><ul>
<li><code>limit</code> を想定して補完している。</li>
<li>トランザクションがテストされている。</li>
</ul>
<h4 id="改善点-2"><a href="#改善点-2" class="headerlink" title="改善点"></a>改善点</h4><ul>
<li>テストデータ <code>self.test_user</code>, <code>self.test_order</code> が使われていない。</li>
</ul>
<h3 id="結果4"><a href="#結果4" class="headerlink" title="結果4"></a>結果4</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> unittest</span><br><span class="line"><span class="keyword">from</span> unittest.mock <span class="keyword">import</span> patch, patch.<span class="built_in">object</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestPetStoreAPI</span>(unittest.TestCase):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setUp</span>(<span class="params">self</span>):</span><br><span class="line">        self.test_pets = [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">&quot;id&quot;</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="string">&quot;name&quot;</span>: <span class="string">&quot;Fido&quot;</span>,</span><br><span class="line">                <span class="string">&quot;type&quot;</span>: <span class="string">&quot;dog&quot;</span>,</span><br><span class="line">                <span class="string">&quot;tag&quot;</span>: <span class="string">&quot;friendly&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">&quot;id&quot;</span>: <span class="number">2</span>,</span><br><span class="line">                <span class="string">&quot;name&quot;</span>: <span class="string">&quot;Whiskers&quot;</span>,</span><br><span class="line">                <span class="string">&quot;type&quot;</span>: <span class="string">&quot;cat&quot;</span>,</span><br><span class="line">                <span class="string">&quot;tag&quot;</span>: <span class="string">&quot;curious&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">        self.test_user = &#123;</span><br><span class="line">            <span class="string">&quot;id&quot;</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="string">&quot;name&quot;</span>: <span class="string">&quot;John Doe&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">        self.test_order = &#123;</span><br><span class="line">            <span class="string">&quot;id&quot;</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="string">&quot;user_id&quot;</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="string">&quot;pet_id&quot;</span>: <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_find_pets</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># Arrange</span></span><br><span class="line">        expected_response = &#123;</span><br><span class="line">            <span class="string">&quot;status&quot;</span>: <span class="number">200</span>,</span><br><span class="line">            <span class="string">&quot;data&quot;</span>: self.test_pets</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Act</span></span><br><span class="line">        <span class="keyword">with</span> patch(<span class="string">&#x27;petstore.findPets&#x27;</span>) <span class="keyword">as</span> mock_find_pets:</span><br><span class="line">            mock_find_pets.return_value = expected_response</span><br><span class="line">            response = petstore.findPets()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Assert</span></span><br><span class="line">        self.assertEqual(response, expected_response)</span><br><span class="line">        mock_find_pets.assert_called_once_with()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_find_pet_by_id</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># Arrange</span></span><br><span class="line">        pet_id = <span class="number">1</span></span><br><span class="line">        expected_response = &#123;</span><br><span class="line">            <span class="string">&quot;status&quot;</span>: <span class="number">200</span>,</span><br><span class="line">            <span class="string">&quot;data&quot;</span>: self.test_pets[<span class="number">0</span>]</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Act</span></span><br><span class="line">        <span class="keyword">with</span> patch(<span class="string">&#x27;petstore.findPetById&#x27;</span>) <span class="keyword">as</span> mock_find_pet_by_id:</span><br><span class="line">            mock_find_pet_by_id.return_value = expected_response</span><br><span class="line">            response = petstore.findPetById(pet_id)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Assert</span></span><br><span class="line">        self.assertEqual(response, expected_response)</span><br><span class="line">        mock_find_pet_by_id.assert_called_once_with(pet_id)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_add_pet_success</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># Arrange</span></span><br><span class="line">        pet = self.test_pets[<span class="number">0</span>]</span><br><span class="line">        expected_response = &#123;</span><br><span class="line">            <span class="string">&quot;status&quot;</span>: <span class="number">200</span>,</span><br><span class="line">            <span class="string">&quot;data&quot;</span>: pet</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Act</span></span><br><span class="line">        <span class="keyword">with</span> patch(<span class="string">&#x27;petstore.addPet&#x27;</span>) <span class="keyword">as</span> mock_add_pet:</span><br><span class="line">            mock_add_pet.return_value = expected_response</span><br><span class="line">            response = petstore.addPet(pet)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Assert</span></span><br><span class="line">        self.assertEqual(response, expected_response)</span><br><span class="line">        mock_add_pet.assert_called_once_with(pet)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_add_pet_failure</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># Arrange</span></span><br><span class="line">        pet = self.test_pets[<span class="number">0</span>]</span><br><span class="line">        expected_response = &#123;</span><br><span class="line">            <span class="string">&quot;status&quot;</span>: <span class="number">500</span>,</span><br><span class="line">            <span class="string">&quot;data&quot;</span>: <span class="literal">None</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Act</span></span><br><span class="line">        <span class="keyword">with</span> patch(<span class="string">&#x27;petstore.addPet&#x27;</span>) <span class="keyword">as</span> mock_add_pet:</span><br><span class="line">            mock_add_pet.return_value = expected_response</span><br><span class="line">            response = petstore.addPet(pet)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Assert</span></span><br><span class="line">        self.assertEqual(response, expected_response)</span><br><span class="line">        mock_add_pet.assert_called_once_with(pet)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_delete_pet</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># Arrange</span></span><br><span class="line">        pet_id = <span class="number">1</span></span><br><span class="line">        expected_response = &#123;</span><br><span class="line">            <span class="string">&quot;status&quot;</span>: <span class="number">204</span>,</span><br><span class="line">            <span class="string">&quot;data&quot;</span>: <span class="literal">None</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Act</span></span><br><span class="line">        <span class="keyword">with</span> patch(<span class="string">&#x27;petstore.deletePet&#x27;</span>) <span class="keyword">as</span> mock_delete_pet:</span><br><span class="line">            mock_delete_pet.return_value = expected_response</span><br><span class="line">            response = petstore.deletePet(pet_id)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Assert</span></span><br><span class="line">        self.assertEqual(response, expected_response)</span><br><span class="line">        mock_delete_pet.assert_called_once_with(pet_id)</span><br></pre></td></tr></table></figure>

<h4 id="良い点-3"><a href="#良い点-3" class="headerlink" title="良い点"></a>良い点</h4><ul>
<li>特に言及すべき点は無し</li>
</ul>
<h4 id="改善点-3"><a href="#改善点-3" class="headerlink" title="改善点"></a>改善点</h4><ul>
<li>テストデータ <code>self.test_user</code>, <code>self.test_order</code> が使用されていない。</li>
</ul>
<h3 id="結果5"><a href="#結果5" class="headerlink" title="結果5"></a>結果5</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> unittest</span><br><span class="line"><span class="keyword">from</span> unittest.mock <span class="keyword">import</span> patch, patch.<span class="built_in">object</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestPetStoreAPI</span>(unittest.TestCase):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setUp</span>(<span class="params">self</span>):</span><br><span class="line">        self.pet_data = &#123;</span><br><span class="line">            <span class="string">&#x27;id&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Fido&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;type&#x27;</span>: <span class="string">&#x27;dog&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;tag&#x27;</span>: <span class="string">&#x27;friendly&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">        self.order_data = &#123;</span><br><span class="line">            <span class="string">&#x27;id&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="string">&#x27;user_id&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="string">&#x27;pet_id&#x27;</span>: <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_find_pets</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">with</span> patch(<span class="string">&#x27;petstore.api.find_pets&#x27;</span>) <span class="keyword">as</span> mock_find_pets:</span><br><span class="line">            mock_find_pets.return_value = [self.pet_data]</span><br><span class="line">            result = petstore.api.find_pets()</span><br><span class="line">            self.assertEqual(result, [self.pet_data])</span><br><span class="line">            mock_find_pets.assert_called_once_with()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_find_pet_by_id</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">with</span> patch(<span class="string">&#x27;petstore.api.find_pet_by_id&#x27;</span>) <span class="keyword">as</span> mock_find_pet_by_id:</span><br><span class="line">            mock_find_pet_by_id.return_value = self.pet_data</span><br><span class="line">            result = petstore.api.find_pet_by_id(<span class="number">1</span>)</span><br><span class="line">            self.assertEqual(result, self.pet_data)</span><br><span class="line">            mock_find_pet_by_id.assert_called_once_with(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_add_pet</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">with</span> patch(<span class="string">&#x27;petstore.api.add_pet&#x27;</span>) <span class="keyword">as</span> mock_add_pet:</span><br><span class="line">            mock_add_pet.return_value = self.pet_data</span><br><span class="line">            result = petstore.api.add_pet(self.pet_data)</span><br><span class="line">            self.assertEqual(result, self.pet_data)</span><br><span class="line">            mock_add_pet.assert_called_once_with(self.pet_data)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_delete_pet</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">with</span> patch(<span class="string">&#x27;petstore.api.delete_pet&#x27;</span>) <span class="keyword">as</span> mock_delete_pet:</span><br><span class="line">            mock_delete_pet.return_value = <span class="literal">None</span></span><br><span class="line">            result = petstore.api.delete_pet(<span class="number">1</span>)</span><br><span class="line">            self.assertIsNone(result)</span><br><span class="line">            mock_delete_pet.assert_called_once_with(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_add_pet_transaction_success</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">with</span> patch.<span class="built_in">object</span>(petstore.api, <span class="string">&#x27;add_pet_transaction&#x27;</span>) <span class="keyword">as</span> mock_add_pet_transaction:</span><br><span class="line">            mock_add_pet_transaction.return_value = self.pet_data</span><br><span class="line">            result = petstore.api.add_pet_transaction(self.pet_data, self.order_data)</span><br><span class="line">            self.assertEqual(result, self.pet_data)</span><br><span class="line">            mock_add_pet_transaction.assert_called_once_with(self.pet_data, self.order_data)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_add_pet_transaction_failure</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">with</span> patch.<span class="built_in">object</span>(petstore.api, <span class="string">&#x27;add_pet_transaction&#x27;</span>) <span class="keyword">as</span> mock_add_pet_transaction:</span><br><span class="line">            mock_add_pet_transaction.side_effect = Exception(<span class="string">&#x27;Transaction failed&#x27;</span>)</span><br><span class="line">            <span class="keyword">with</span> self.assertRaises(Exception):</span><br><span class="line">                petstore.api.add_pet_transaction(self.pet_data, self.order_data)</span><br><span class="line">            mock_add_pet_transaction.assert_called_once_with(self.pet_data, self.order_data)</span><br></pre></td></tr></table></figure>

<h4 id="良い点-4"><a href="#良い点-4" class="headerlink" title="良い点"></a>良い点</h4><ul>
<li>トランザクションがテストされている。</li>
<li>トランザクション失敗時に例外が上がることを想定している。</li>
</ul>
<h4 id="改善点-4"><a href="#改善点-4" class="headerlink" title="改善点"></a>改善点</h4><ul>
<li>特に言及すべき点は無し</li>
</ul>
<h2 id="総評"><a href="#総評" class="headerlink" title="総評"></a>総評</h2><p>前回よりもプロンプトに忠実な結果を安定的に得られるようになりました。<br>結果に多少の差異はありますが、トークン数制限に到達してしまった結果2 を除き、概ねどの結果でもそのまま採用することができるのではないかと思います。<br>その中でも、結果1 はプロンプトに最も忠実となっており、個人的には結果1 をテストコードとして採用したいと思いました。</p>
<h2 id="まとめ"><a href="#まとめ" class="headerlink" title="まとめ"></a>まとめ</h2><p>ChatGPT にプロンプトを生成させる PromptGenerator メソッドを用いて、プロンプトのチューニングを行い、そのプロンプトを用いて前回同様のアプローチでテストコードを生成し、その内容を評価しました。</p>
<p>プロンプトのチューニング方法は様々ありますが、このメソッドによるプロンプトのチューニングを採用するだけで、アウトプットの品質が飛躍的に高まることが確認できました。</p>
<p>前回は「コードスニペット」としての用途にしか使えないと評しましたが、今回のアウトプットはほぼほぼテストコードの体をなしています。Zero-shot でここまでできることに驚きました。</p>
<p>インプットしたドキュメントはサンプルレベルでしたが、これを精緻化することで、より実践的なテストコードが生成できることが期待できます。<br>その際にはやはりトークン数制限が問題になるので、GPT-4 を使用する必要が出てくるでしょう。<br>また、より再現性を高めるために、プロンプトの生成とテストコードの生成の両方において <code>Temperature</code> をより 0 に近づける試みも、後々必要になってくると思われます。</p>
<p>以上、<a target="_blank" rel="noopener" href="https://learn.microsoft.com/ja-jp/azure/cognitive-services/openai/overview">Azure OpenAI Service</a> を使ってドキュメント (OpenAPI 仕様, PlantUML のシーケンス図およびクラス図) からテストコードを生成し、その内容を評価する取り組みについて、少なくとも GPT-3 を利用したものに関しては、これにて一旦終了したいと思います。</p>
<hr>
<h2 id="Appendix-生成されたプロンプト-2-〜-13"><a href="#Appendix-生成されたプロンプト-2-〜-13" class="headerlink" title="Appendix: 生成されたプロンプト #2 〜 #13"></a>Appendix: 生成されたプロンプト #2 〜 #13</h2><h3 id="生成されたプロンプト-3"><a href="#生成されたプロンプト-3" class="headerlink" title="生成されたプロンプト #3"></a>生成されたプロンプト #3</h3><blockquote>
<p>a) Revised Prompt:<br>How can one generate MECE (mutually exclusive and collectively exhaustive) test code in Python using materials like OpenAI Specifications, PlantUML sequence diagrams, and PlantUML class diagrams for enterprise software development, focusing on utilizing the unittest module and patch module of unittest.mock?</p>
<p>b) Suggestions:</p>
<ul>
<li>Explain how to create organized, structured, and clean test code considering normal, error, corner, and edge cases.</li>
<li>Describe the process of understanding software usage from the documents and making assumptions for test data preparation.</li>
<li>Provide examples of how test code can be generated from OpenAPI Specifications, PlantUML sequence diagrams, and PlantUML class diagrams, incorporating the unittest module and patch module of unittest.mock.</li>
</ul>
<p>c) Questions:</p>
<ol>
<li>Are there any specific examples or scenarios you would like me to include in the prompt?</li>
<li>Would you like me to focus on a specific type of enterprise software or a general approach that can be applied across various types of software?</li>
</ol>
</blockquote>
<h4 id="回答-4"><a href="#回答-4" class="headerlink" title="回答"></a>回答</h4><p>As my answer for your question 1, there are no examples or scenarios.<br>As my answer for your question 2, I would like you to focus on a general approach that can be applied across various types of software.</p>
<h3 id="生成されたプロンプト-4"><a href="#生成されたプロンプト-4" class="headerlink" title="生成されたプロンプト #4"></a>生成されたプロンプト #4</h3><blockquote>
<p>a) Revised Prompt:<br>How can one generate MECE (mutually exclusive and collectively exhaustive) test code in Python for various types of enterprise software using materials like OpenAI Specifications, PlantUML sequence diagrams, and PlantUML class diagrams, focusing on utilizing the unittest module and patch module of unittest.mock?</p>
<p>b) Suggestions:</p>
<ul>
<li>Explain how to create organized, structured, and clean test code considering normal, error, corner, and edge cases for different types of enterprise software.</li>
<li>Describe the process of understanding software usage from the documents and making assumptions for test data preparation in a general context.</li>
<li>Provide a general approach for generating test code from OpenAPI Specifications, PlantUML sequence diagrams, and PlantUML class diagrams, incorporating the unittest module and patch module of unittest.mock, that can be applied across various types of software.</li>
</ul>
<p>c) Questions:</p>
<ol>
<li>Is there any other aspect of test code generation you would like me to focus on?</li>
<li>Are you satisfied with the revised prompt and suggestions, or would you like me to make further adjustments?</li>
</ol>
</blockquote>
<h4 id="回答-5"><a href="#回答-5" class="headerlink" title="回答"></a>回答</h4><p>As my answer for your question 1, I would like you to generate test codes step-by-step. You will think of what test case you should generate next for each test case. You will prepare necessary test data step-by-step as well.<br>As my answer for your question2, no, I still am not. In the prompt, I will give you OpenAPI Specifications in JSON or YAML, PlantUML sequence diagrams in text, and PlantUML class diagrams in text as well. I would like you to prepare fields for these input materials that you will receive.</p>
<h3 id="生成されたプロンプト-5"><a href="#生成されたプロンプト-5" class="headerlink" title="生成されたプロンプト #5"></a>生成されたプロンプト #5</h3><blockquote>
<p>a) Revised Prompt:<br>How can one generate MECE (mutually exclusive and collectively exhaustive) test code in Python for various types of enterprise software using materials like OpenAPI Specifications (in JSON or YAML), PlantUML sequence diagrams (in text), and PlantUML class diagrams (in text), focusing on utilizing the unittest module and patch module of unittest.mock, while generating test cases and preparing test data step-by-step?</p>
<p>b) Suggestions:</p>
<ul>
<li>Explain how to create organized, structured, and clean test code considering normal, error, corner, and edge cases for different types of enterprise software, with a step-by-step approach.</li>
<li>Describe the process of understanding software usage from the documents and making assumptions for test data preparation in a general context, while preparing necessary test data step-by-step.</li>
<li>Provide a general approach for generating test code from OpenAPI Specifications (in JSON or YAML), PlantUML sequence diagrams (in text), and PlantUML class diagrams (in text), incorporating the unittest module and patch module of unittest.mock, that can be applied across various types of software.</li>
</ul>
<p>c) Questions:</p>
<ol>
<li>Are there any other specific requirements for the input materials (OpenAPI Specifications, PlantUML sequence diagrams, and PlantUML class diagrams) that you would like me to consider?</li>
<li>Are you satisfied with the revised prompt and suggestions, or would you like me to make further adjustments?</li>
</ol>
</blockquote>
<h4 id="回答-6"><a href="#回答-6" class="headerlink" title="回答"></a>回答</h4><p>As my answer for your question 1, I would like you to let me specify the test target, meaning what to test. It is usually chosen from actors of the sequence diagrams. As my answer for your question 2, I am still not satisfied with the revised prompt and suggestions. Please make further adjustments.</p>
<h3 id="生成されたプロンプト-6"><a href="#生成されたプロンプト-6" class="headerlink" title="生成されたプロンプト #6"></a>生成されたプロンプト #6</h3><blockquote>
<p>a) Revised Prompt:<br>How can one generate MECE (mutually exclusive and collectively exhaustive) test code in Python for various types of enterprise software using materials like OpenAPI Specifications (in JSON or YAML), PlantUML sequence diagrams (in text), and PlantUML class diagrams (in text), focusing on utilizing the unittest module and patch module of unittest.mock, while generating test cases and preparing test data step-by-step, and allowing the user to specify test targets based on the actors of the sequence diagrams?</p>
<p>b) Suggestions:</p>
<ul>
<li>Explain how to create organized, structured, and clean test code considering normal, error, corner, and edge cases for different types of enterprise software, with a step-by-step approach and an option to specify test targets based on the actors of the sequence diagrams.</li>
<li>Describe the process of understanding software usage from the documents and making assumptions for test data preparation in a general context, while preparing necessary test data step-by-step and focusing on the specified test targets.</li>
<li>Provide a general approach for generating test code from OpenAPI Specifications (in JSON or YAML), PlantUML sequence diagrams (in text), and PlantUML class diagrams (in text), incorporating the unittest module and patch module of unittest.mock, that can be applied across various types of software and allows users to specify test targets based on the actors of the sequence diagrams.</li>
</ul>
<p>c) Questions:</p>
<ol>
<li>Are there any other specific requirements or adjustments you would like me to consider for the revised prompt and suggestions?</li>
<li>Are you satisfied with the revised prompt and suggestions, or would you like me to make further adjustments?</li>
</ol>
</blockquote>
<h4 id="回答-7"><a href="#回答-7" class="headerlink" title="回答"></a>回答</h4><p>As my answer for your question 1, I would like to emphasize that test cases should be based on the class diagrams first. And then, you consider the sequence diagrams. Do not forget considering the OpenAPI specifications when the test target is an API server. As my answer for your question 2, I am still not satisfied with the revised prompt and suggestions, so please make further adjustments.</p>
<h3 id="生成されたプロンプト-7"><a href="#生成されたプロンプト-7" class="headerlink" title="生成されたプロンプト #7"></a>生成されたプロンプト #7</h3><blockquote>
<p>a) Revised Prompt:<br>How can one generate MECE (mutually exclusive and collectively exhaustive) test code in Python for various types of enterprise software using materials like OpenAPI Specifications (in JSON or YAML), PlantUML sequence diagrams (in text), and PlantUML class diagrams (in text), focusing on utilizing the unittest module and patch module of unittest.mock, while generating test cases and preparing test data step-by-step, and allowing the user to specify test targets based on the actors of the sequence diagrams? The test cases should be based on class diagrams first, then considering sequence diagrams, and finally taking into account the OpenAPI specifications when the test target is an API server.</p>
<p>b) Suggestions:</p>
<ul>
<li>Explain how to create organized, structured, and clean test code considering normal, error, corner, and edge cases for different types of enterprise software, with a step-by-step approach, an option to specify test targets based on the actors of the sequence diagrams, and a focus on class diagrams followed by sequence diagrams and OpenAPI specifications.</li>
<li>Describe the process of understanding software usage from the documents and making assumptions for test data preparation in a general context, while preparing necessary test data step-by-step, focusing on the specified test targets, and considering class diagrams, sequence diagrams, and OpenAPI specifications in the respective order.</li>
<li>Provide a general approach for generating test code from OpenAPI Specifications (in JSON or YAML), PlantUML sequence diagrams (in text), and PlantUML class diagrams (in text), incorporating the unittest module and patch module of unittest.mock, that can be applied across various types of software, allows users to specify test targets based on the actors of the sequence diagrams, and follows the order of considering class diagrams, sequence diagrams, and OpenAPI specifications.</li>
</ul>
<p>c) Questions:</p>
<ol>
<li>Are there any other specific requirements or adjustments you would like me to consider for the revised prompt and suggestions?</li>
<li>Are you satisfied with the revised prompt and suggestions, or would you like me to make further adjustments?</li>
</ol>
</blockquote>
<h4 id="回答-8"><a href="#回答-8" class="headerlink" title="回答"></a>回答</h4><p>As my answer for your question 1, I would like you to make the test data immutable. To achieve that, you can define them in setUp method of the test class which inherits unittest.TestCase. As my answer for your question 2, I am still not satisfied with the revised prompt and suggestions, so I expect you to make further adjustments.</p>
<h3 id="生成されたプロンプト-8"><a href="#生成されたプロンプト-8" class="headerlink" title="生成されたプロンプト #8"></a>生成されたプロンプト #8</h3><blockquote>
<p>a) Revised Prompt:<br>How can one generate MECE (mutually exclusive and collectively exhaustive) test code in Python for various types of enterprise software using materials like OpenAPI Specifications (in JSON or YAML), PlantUML sequence diagrams (in text), and PlantUML class diagrams (in text), focusing on utilizing the unittest module and patch module of unittest.mock, while generating test cases and preparing test data step-by-step, and allowing the user to specify test targets based on the actors of the sequence diagrams? The test cases should be based on class diagrams first, then considering sequence diagrams, and finally taking into account the OpenAPI specifications when the test target is an API server. The test data should be immutable, defined in the setUp method of the test class that inherits unittest.TestCase.</p>
<p>b) Suggestions:</p>
<ul>
<li>Explain how to create organized, structured, and clean test code considering normal, error, corner, and edge cases for different types of enterprise software, with a step-by-step approach, an option to specify test targets based on the actors of the sequence diagrams, a focus on class diagrams followed by sequence diagrams and OpenAPI specifications, and the use of setUp method to define immutable test data in the test class that inherits unittest.TestCase.</li>
<li>Describe the process of understanding software usage from the documents and making assumptions for test data preparation in a general context, while preparing necessary test data step-by-step, focusing on the specified test targets, considering class diagrams, sequence diagrams, and OpenAPI specifications in the respective order, and ensuring the test data is immutable by defining it in the setUp method of the test class.</li>
<li>Provide a general approach for generating test code from OpenAPI Specifications (in JSON or YAML), PlantUML sequence diagrams (in text), and PlantUML class diagrams (in text), incorporating the unittest module and patch module of unittest.mock, that can be applied across various types of software, allows users to specify test targets based on the actors of the sequence diagrams, follows the order of considering class diagrams, sequence diagrams, and OpenAPI specifications, and defines immutable test data in the setUp method of the test class that inherits unittest.TestCase.</li>
</ul>
<p>c) Questions:</p>
<ol>
<li>Are there any other specific requirements or adjustments you would like me to consider for the revised prompt and suggestions?</li>
<li>Are you satisfied with the revised prompt and suggestions, or would you like me to make further adjustments?</li>
</ol>
</blockquote>
<h4 id="回答-9"><a href="#回答-9" class="headerlink" title="回答"></a>回答</h4><p>As my answer for your question 1, if the test data which you defined in the setUp method of the test class do not make sense for additional test cases you considered based on the documents, you can specify additional test data in the test cases. As my answer for your question 2, I am still not satisfied with the revised prompt and suggestions, so I would like you to make further adjustments.</p>
<h3 id="生成されたプロンプト-9"><a href="#生成されたプロンプト-9" class="headerlink" title="生成されたプロンプト #9"></a>生成されたプロンプト #9</h3><blockquote>
<p>a) Revised Prompt:<br>How can one generate MECE (mutually exclusive and collectively exhaustive) test code in Python for various types of enterprise software using materials like OpenAPI Specifications (in JSON or YAML), PlantUML sequence diagrams (in text), and PlantUML class diagrams (in text), focusing on utilizing the unittest module and patch module of unittest.mock, while generating test cases and preparing test data step-by-step, and allowing the user to specify test targets based on the actors of the sequence diagrams? The test cases should be based on class diagrams first, then considering sequence diagrams, and finally taking into account the OpenAPI specifications when the test target is an API server. The test data should be immutable, defined in the setUp method of the test class that inherits unittest.TestCase, and additional test data can be specified in the test cases if the setUp test data is not sufficient.</p>
<p>b) Suggestions:</p>
<ul>
<li>Explain how to create organized, structured, and clean test code considering normal, error, corner, and edge cases for different types of enterprise software, with a step-by-step approach, an option to specify test targets based on the actors of the sequence diagrams, a focus on class diagrams followed by sequence diagrams and OpenAPI specifications, and the use of setUp method to define immutable test data in the test class that inherits unittest.TestCase, with the possibility to add extra test data in the test cases if necessary.</li>
<li>Describe the process of understanding software usage from the documents and making assumptions for test data preparation in a general context, while preparing necessary test data step-by-step, focusing on the specified test targets, considering class diagrams, sequence diagrams, and OpenAPI specifications in the respective order, ensuring the test data is immutable by defining it in the setUp method of the test class, and specifying additional test data in the test cases if required.</li>
<li>Provide a general approach for generating test code from OpenAPI Specifications (in JSON or YAML), PlantUML sequence diagrams (in text), and PlantUML class diagrams (in text), incorporating the unittest module and patch module of unittest.mock, that can be applied across various types of software, allows users to specify test targets based on the actors of the sequence diagrams, follows the order of considering class diagrams, sequence diagrams, and OpenAPI specifications, defines immutable test data in the setUp method of the test class that inherits unittest.TestCase, and allows for additional test data to be specified in the test cases when necessary.</li>
</ul>
<p>c) Questions:</p>
<ol>
<li>Are there any other specific requirements or adjustments you would like me to consider for the revised prompt and suggestions?</li>
<li>Are you satisfied with the revised prompt and suggestions, or would you like me to make further adjustments?</li>
</ol>
</blockquote>
<h4 id="回答-10"><a href="#回答-10" class="headerlink" title="回答"></a>回答</h4><p>As my answer for your question 1, when you use patch module of unittest.mock for mocking, I would like you to use decorator like <code>@patch(&#39;...&#39;)</code> rather thatn with statement like <code>with patch(&#39;...&#39;) as mock_foo:</code>. As my answer for your question 2, I am still not satisfied with the revised prompt and suggestions, so please make further adjustments.</p>
<h3 id="生成されたプロンプト-10"><a href="#生成されたプロンプト-10" class="headerlink" title="生成されたプロンプト #10"></a>生成されたプロンプト #10</h3><blockquote>
<p>a) Revised Prompt:<br>How can one generate MECE (mutually exclusive and collectively exhaustive) test code in Python for various types of enterprise software using materials like OpenAPI Specifications (in JSON or YAML), PlantUML sequence diagrams (in text), and PlantUML class diagrams (in text), focusing on utilizing the unittest module and patch module of unittest.mock, while generating test cases and preparing test data step-by-step, and allowing the user to specify test targets based on the actors of the sequence diagrams? The test cases should be based on class diagrams first, then considering sequence diagrams, and finally taking into account the OpenAPI specifications when the test target is an API server. The test data should be immutable, defined in the setUp method of the test class that inherits unittest.TestCase, and additional test data can be specified in the test cases if the setUp test data is not sufficient. When using the patch module of unittest.mock for mocking, the @patch(‘…’) decorator should be used instead of the with patch(‘…’) as mock_foo: statement.</p>
<p>b) Suggestions:</p>
<ul>
<li>Explain how to create organized, structured, and clean test code considering normal, error, corner, and edge cases for different types of enterprise software, with a step-by-step approach, an option to specify test targets based on the actors of the sequence diagrams, a focus on class diagrams followed by sequence diagrams and OpenAPI specifications, the use of setUp method to define immutable test data in the test class that inherits unittest.TestCase, the possibility to add extra test data in the test cases if necessary, and the use of @patch(‘…’) decorator for mocking.</li>
<li>Describe the process of understanding software usage from the documents and making assumptions for test data preparation in a general context, while preparing necessary test data step-by-step, focusing on the specified test targets, considering class diagrams, sequence diagrams, and OpenAPI specifications in the respective order, ensuring the test data is immutable by defining it in the setUp method of the test class, specifying additional test data in the test cases if required, and using the @patch(‘…’) decorator for mocking.</li>
<li>Provide a general approach for generating test code from OpenAPI Specifications (in JSON or YAML), PlantUML sequence diagrams (in text), and PlantUML class diagrams (in text), incorporating the unittest module and patch module of unittest.mock, that can be applied across various types of software, allows users to specify test targets based on the actors of the sequence diagrams, follows the order of considering class diagrams, sequence diagrams, and OpenAPI specifications, defines immutable test data in the setUp method of the test class that inherits unittest.TestCase, allows for additional test data to be specified in the test cases when necessary, and employs the @patch(‘…’) decorator for mocking purposes.</li>
</ul>
<p>c) Questions:</p>
<ol>
<li>Are there any other specific requirements or adjustments you would like me to consider for the revised prompt and suggestions?</li>
<li>Are you satisfied with the revised prompt and suggestions, or would you like me to make further adjustments?</li>
</ol>
</blockquote>
<h4 id="回答-11"><a href="#回答-11" class="headerlink" title="回答"></a>回答</h4><p>As my answer for your question 1, I would like you to apply spy test double pattern using <code>assert_called_once_with</code> method of <code>patch.object</code> when the pattern is applicable for the test case. If you use the spy pattern, you can use <code>patch.object</code> under with statement like <code>with patch.object(...) as mock_foo:</code>. As my answer for your question 2, I am still not satisfied with the revised prompt and suggestions, so I would like you to make further adjustments.</p>
<h3 id="生成されたプロンプト-11"><a href="#生成されたプロンプト-11" class="headerlink" title="生成されたプロンプト #11"></a>生成されたプロンプト #11</h3><blockquote>
<p>a) Revised Prompt:<br>How can one generate MECE (mutually exclusive and collectively exhaustive) test code in Python for various types of enterprise software using materials like OpenAPI Specifications (in JSON or YAML), PlantUML sequence diagrams (in text), and PlantUML class diagrams (in text), focusing on utilizing the unittest module and patch module of unittest.mock, while generating test cases and preparing test data step-by-step, and allowing the user to specify test targets based on the actors of the sequence diagrams? The test cases should be based on class diagrams first, then considering sequence diagrams, and finally taking into account the OpenAPI specifications when the test target is an API server. The test data should be immutable, defined in the setUp method of the test class that inherits unittest.TestCase, and additional test data can be specified in the test cases if the setUp test data is not sufficient. When using the patch module of unittest.mock for mocking, the @patch(‘…’) decorator should be used instead of the with patch(‘…’) as mock_foo: statement. Additionally, the spy test double pattern should be applied using the assert_called_once_with method of patch.object when applicable for the test case, and the with patch.object(…) as mock_foo: statement can be used in such cases.</p>
<p>b) Suggestions:</p>
<ul>
<li>Explain how to create organized, structured, and clean test code considering normal, error, corner, and edge cases for different types of enterprise software, with a step-by-step approach, an option to specify test targets based on the actors of the sequence diagrams, a focus on class diagrams followed by sequence diagrams and OpenAPI specifications, the use of setUp method to define immutable test data in the test class that inherits unittest.TestCase, the possibility to add extra test data in the test cases if necessary, the use of @patch(‘…’) decorator for mocking, and the application of the spy test double pattern using the assert_called_once_with method of patch.object when applicable.</li>
<li>Describe the process of understanding software usage from the documents and making assumptions for test data preparation in a general context, while preparing necessary test data step-by-step, focusing on the specified test targets, considering class diagrams, sequence diagrams, and OpenAPI specifications in the respective order, ensuring the test data is immutable by defining it in the setUp method of the test class, specifying additional test data in the test cases if required, using the @patch(‘…’) decorator for mocking, and applying the spy test double pattern with the assert_called_once_with method of patch.object when applicable.</li>
<li>Provide a general approach for generating test code from OpenAPI Specifications (in JSON or YAML), PlantUML sequence diagrams (in text), and PlantUML class diagrams (in text), incorporating the unittest module and patch module of unittest.mock, that can be applied across various types of software, allows users to specify test targets based on the actors of the sequence diagrams, follows the order of considering class diagrams, sequence diagrams, and OpenAPI specifications, defines immutable test data in the setUp method of the test class that inherits unittest.TestCase, allows for additional test data to be specified in the test cases when necessary, employs the @patch(‘…’) decorator for mocking purposes, and uses the spy test double pattern with the assert_called_once_with method of patch.object when appropriate.</li>
</ul>
<p>c) Questions:</p>
<ol>
<li>Are there any other specific requirements or adjustments you would like me to consider for the revised prompt and suggestions?</li>
<li>Are you satisfied with the revised prompt and suggestions, or would you like me to make further adjustments?</li>
</ol>
</blockquote>
<h4 id="回答-12"><a href="#回答-12" class="headerlink" title="回答"></a>回答</h4><p>As my answer for your question 1, I would like you to write each test case in AAA (Arrange-Act-Assert) style. As my answer for your question 2, I am still not satisfied with the revised prompt and suggestions, so please make further adjustments.</p>
<h3 id="生成されたプロンプト-12"><a href="#生成されたプロンプト-12" class="headerlink" title="生成されたプロンプト #12"></a>生成されたプロンプト #12</h3><blockquote>
<p>a) Revised Prompt:<br>How can one generate MECE (mutually exclusive and collectively exhaustive) test code in Python for various types of enterprise software using materials like OpenAPI Specifications (in JSON or YAML), PlantUML sequence diagrams (in text), and PlantUML class diagrams (in text), focusing on utilizing the unittest module and patch module of unittest.mock, while generating test cases and preparing test data step-by-step, and allowing the user to specify test targets based on the actors of the sequence diagrams? The test cases should be based on class diagrams first, then considering sequence diagrams, and finally taking into account the OpenAPI specifications when the test target is an API server. The test data should be immutable, defined in the setUp method of the test class that inherits unittest.TestCase, and additional test data can be specified in the test cases if the setUp test data is not sufficient. When using the patch module of unittest.mock for mocking, the @patch(‘…’) decorator should be used instead of the with patch(‘…’) as mock_foo: statement. Additionally, the spy test double pattern should be applied using the assert_called_once_with method of patch.object when applicable for the test case, and the with patch.object(…) as mock_foo: statement can be used in such cases. Each test case should follow the AAA (Arrange-Act-Assert) style.</p>
<p>b) Suggestions:</p>
<ul>
<li>Explain how to create organized, structured, and clean test code considering normal, error, corner, and edge cases for different types of enterprise software, with a step-by-step approach, an option to specify test targets based on the actors of the sequence diagrams, a focus on class diagrams followed by sequence diagrams and OpenAPI specifications, the use of setUp method to define immutable test data in the test class that inherits unittest.TestCase, the possibility to add extra test data in the test cases if necessary, the use of @patch(‘…’) decorator for mocking, the application of the spy test double pattern using the assert_called_once_with method of patch.object when applicable, and following the AAA (Arrange-Act-Assert) style for each test case.</li>
<li>Describe the process of understanding software usage from the documents and making assumptions for test data preparation in a general context, while preparing necessary test data step-by-step, focusing on the specified test targets, considering class diagrams, sequence diagrams, and OpenAPI specifications in the respective order, ensuring the test data is immutable by defining it in the setUp method of the test class, specifying additional test data in the test cases if required, using the @patch(‘…’) decorator for mocking, applying the spy test double pattern with the assert_called_once_with method of patch.object when applicable, and adhering to the AAA (Arrange-Act-Assert) style for each test case.</li>
<li>Provide a general approach for generating test code from OpenAPI Specifications (in JSON or YAML), PlantUML sequence diagrams (in text), and PlantUML class diagrams (in text), incorporating the unittest module and patch module of unittest.mock, that can be applied across various types of software, allows users to specify test targets based on the actors of the sequence diagrams, follows the order of considering class diagrams, sequence diagrams, and OpenAPI specifications, defines immutable test data in the setUp method of the test class that inherits unittest.TestCase, allows for additional test data to be specified in the test cases when necessary, employs the @patch(‘…’) decorator for mocking purposes, uses the spy test double pattern with the assert_called_once_with method of patch.object when appropriate, and follows the AAA (Arrange-Act-Assert) style for each test case.</li>
</ul>
<p>c) Questions:</p>
<ol>
<li>Are there any other specific requirements or adjustments you would like me to consider for the revised prompt and suggestions?</li>
<li>Are you satisfied with the revised prompt and suggestions, or would you like me to make further adjustments?</li>
</ol>
</blockquote>
<h4 id="回答-13"><a href="#回答-13" class="headerlink" title="回答"></a>回答</h4><p>As my answer for your question 1, if you are aware of current token count, be careful not to exceed the limitation of tokens especially if you are a model of GPT-3. The token length limit is 4096 for GPT-3, 8192 for GPT-4, and 32768 for GPT-4-32k. Not to exceed the limitation, you do not need to output comments. If you are about to exceed the limitation, you can stop outputting next test case and finish the test class. As my answer for your question 2, I am still not satisfied with the revised prompt and suggestions, so I would like you to make further adjustments.</p>
<h3 id="生成されたプロンプト-13"><a href="#生成されたプロンプト-13" class="headerlink" title="生成されたプロンプト #13"></a>生成されたプロンプト #13</h3><blockquote>
<p>a) Revised Prompt:<br>How can one generate MECE (mutually exclusive and collectively exhaustive) test code in Python for various types of enterprise software using materials like OpenAPI Specifications (in JSON or YAML), PlantUML sequence diagrams (in text), and PlantUML class diagrams (in text), focusing on utilizing the unittest module and patch module of unittest.mock, while generating test cases and preparing test data step-by-step, and allowing the user to specify test targets based on the actors of the sequence diagrams? The test cases should be based on class diagrams first, then considering sequence diagrams, and finally taking into account the OpenAPI specifications when the test target is an API server. The test data should be immutable, defined in the setUp method of the test class that inherits unittest.TestCase, and additional test data can be specified in the test cases if the setUp test data is not sufficient. When using the patch module of unittest.mock for mocking, the @patch(‘…’) decorator should be used instead of the with patch(‘…’) as mock_foo: statement. Additionally, the spy test double pattern should be applied using the assert_called_once_with method of patch.object when applicable for the test case, and the with patch.object(…) as mock_foo: statement can be used in such cases. Each test case should follow the AAA (Arrange-Act-Assert) style. Be mindful of token limitations and avoid exceeding them when generating test code.</p>
<p>b) Suggestions:</p>
<ul>
<li>Explain how to create organized, structured, and clean test code considering normal, error, corner, and edge cases for different types of enterprise software, with a step-by-step approach, an option to specify test targets based on the actors of the sequence diagrams, a focus on class diagrams followed by sequence diagrams and OpenAPI specifications, the use of setUp method to define immutable test data in the test class that inherits unittest.TestCase, the possibility to add extra test data in the test cases if necessary, the use of @patch(‘…’) decorator for mocking, the application of the spy test double pattern using the assert_called_once_with method of patch.object when applicable, following the AAA (Arrange-Act-Assert) style for each test case, and being mindful of token limitations when generating test code.</li>
<li>Describe the process of understanding software usage from the documents and making assumptions for test data preparation in a general context, while preparing necessary test data step-by-step, focusing on the specified test targets, considering class diagrams, sequence diagrams, and OpenAPI specifications in the respective order, ensuring the test data is immutable by defining it in the setUp method of the test class, specifying additional test data in the test cases if required, using the @patch(‘…’) decorator for mocking, applying the spy test double pattern with the assert_called_once_with method of patch.object when applicable, adhering to the AAA (Arrange-Act-Assert) style for each test case, and taking token limitations into account when generating test code.</li>
<li>Provide a general approach for generating test code from OpenAPI Specifications (in JSON or YAML), PlantUML sequence diagrams (in text), and PlantUML class diagrams (in text), incorporating the unittest module and patch module of unittest.mock, that can be applied across various types of software, allows users to specify test targets based on the actors of the sequence diagrams, follows the order of considering class diagrams, sequence diagrams, and OpenAPI specifications, defines immutable test data in the setUp method of the test class that inherits unittest.TestCase, allows for additional test data to be specified in the test cases when necessary, employs the @patch(‘…’) decorator for mocking purposes, uses the spy test double pattern with the assert_called_once_with method of patch.object when appropriate, follows the AAA (Arrange-Act-Assert) style for each test case, and remains within token limitations when generating test code.</li>
</ul>
<p>c) Questions:</p>
<ol>
<li>Are there any other specific requirements or adjustments you would like me to consider for the revised prompt and suggestions?</li>
<li>Are you satisfied with the revised prompt and suggestions, or would you like me to make further adjustments?</li>
</ol>
</blockquote>
<h4 id="回答-14"><a href="#回答-14" class="headerlink" title="回答"></a>回答</h4><p>As my answer for your question 1, you do not have to write comments to save the number of characters and not to exceed the token limitation. As my answer for your question 2, I am still not satisfied with the revised prompt and suggestions, so please make further adjustments.</p>
</div></header><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a class="post__tag__link" href="/tags/Azure/">Azure</a></li><li class="post__tag__item"><a class="post__tag__link" href="/tags/Azure-OpenAI-Service/">Azure OpenAI Service</a></li><li class="post__tag__item"><a class="post__tag__link" href="/tags/OpenAPI/">OpenAPI</a></li><li class="post__tag__item"><a class="post__tag__link" href="/tags/PlantUML/">PlantUML</a></li><li class="post__tag__item"><a class="post__tag__link" href="/tags/TDD/">TDD</a></li><li class="post__tag__item"><a class="post__tag__link" href="/tags/GPT-4/">GPT-4</a></li><li class="post__tag__item"><a class="post__tag__link" href="/tags/OpenAI/">OpenAI</a></li><li class="post__tag__item"><a class="post__tag__link" href="/tags/Prompt-engineering/">Prompt engineering</a></li><li class="post__tag__item"><a class="post__tag__link" href="/tags/GPT-3/">GPT-3</a></li></ul></footer></article></main><footer class="foot"><div class="foot-copy">&copy; 2021 - 2023 kt.log<a class="icp-a" href="https://github.com/k14i" target="view_window">by kt (Keisuke Takahashi)</a></div></footer><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
ga('create','G-9XBBR7M7V2');
ga('send','pageview');</script>
<script src="/js/scroller.js"></script>

<script src="/js/main.js"></script>
</body></html>